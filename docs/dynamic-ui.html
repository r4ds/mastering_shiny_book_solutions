<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Dynamic UI | Mastering Shiny Solutions</title>
  <meta name="description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Dynamic UI | Mastering Shiny Solutions" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="github-repo" content="r4ds/mastering_shiny_book_solutions" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Dynamic UI | Mastering Shiny Solutions" />
  
  <meta name="twitter:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  

<meta name="author" content="The R4DS Online Learning Community" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="uploads-and-downloads.html"/>
<link rel="next" href="bookmarking.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102068953-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-102068953-3');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mastering Shiny Solutions</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#note-boxes"><i class="fa fa-check"></i>Note Boxes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html"><i class="fa fa-check"></i><b>2</b> Your First Shiny App</a>
<ul>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.1"><i class="fa fa-check"></i>Exercise 2.8.1</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.2"><i class="fa fa-check"></i>Exercise 2.8.2</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.3"><i class="fa fa-check"></i>Exercise 2.8.3</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.4"><i class="fa fa-check"></i>Exercise 2.8.4</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.5"><i class="fa fa-check"></i>Exercise 2.8.5</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-ui.html"><a href="basic-ui.html"><i class="fa fa-check"></i><b>3</b> Basic UI</a>
<ul>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.1"><i class="fa fa-check"></i>Exercise 3.2.8.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.2"><i class="fa fa-check"></i>Exercise 3.2.8.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.3"><i class="fa fa-check"></i>Exercise 3.2.8.3</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.4"><i class="fa fa-check"></i>Exercise 3.2.8.4</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.5"><i class="fa fa-check"></i>Exercise 3.2.8.5</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.1"><i class="fa fa-check"></i>Exercise 3.3.5.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.2"><i class="fa fa-check"></i>Exercise 3.3.5.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.1"><i class="fa fa-check"></i>Exercise 3.4.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.2"><i class="fa fa-check"></i>Exercise 3.4.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.3"><i class="fa fa-check"></i>Exercise 3.4.6.3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basic-reactivity.html"><a href="basic-reactivity.html"><i class="fa fa-check"></i><b>4</b> Basic Reactivity</a>
<ul>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.1"><i class="fa fa-check"></i>Exercise 4.3.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.2"><i class="fa fa-check"></i>Exercise 4.3.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.4.6.1"><i class="fa fa-check"></i>Exercise 4.4.6.1</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html"><i class="fa fa-check"></i><b>5</b> Case Study: ER Injuries</a>
<ul>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.1"><i class="fa fa-check"></i>Exercise 5.8.1</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.2"><i class="fa fa-check"></i>Exercise 5.8.2</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.3"><i class="fa fa-check"></i>Exercise 5.8.3</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.4"><i class="fa fa-check"></i>Exercise 5.8.4</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>6</b> Workflow</a></li>
<li class="chapter" data-level="7" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>7</b> Graphics</a>
<ul>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.1"><i class="fa fa-check"></i>Exercise 7.6.1</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.2"><i class="fa fa-check"></i>Exercise 7.6.2</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.3"><i class="fa fa-check"></i>Exercise 7.6.3</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="user-feedback.html"><a href="user-feedback.html"><i class="fa fa-check"></i><b>8</b> User Feedback</a></li>
<li class="chapter" data-level="9" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html"><i class="fa fa-check"></i><b>9</b> Uploads and Downloads</a>
<ul>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.1"><i class="fa fa-check"></i>Exercise 9.4.1</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.2"><i class="fa fa-check"></i>Exercise 9.4.2</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.3"><i class="fa fa-check"></i>Exercise 9.4.3</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.4"><i class="fa fa-check"></i>Exercise 9.4.4</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dynamic-ui.html"><a href="dynamic-ui.html"><i class="fa fa-check"></i><b>10</b> Dynamic UI</a>
<ul>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.1"><i class="fa fa-check"></i>Exercise 10.1.5.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.2"><i class="fa fa-check"></i>Exercise 10.1.5.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.3"><i class="fa fa-check"></i>Exercise 10.1.5.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.4"><i class="fa fa-check"></i>Exercise 10.1.5.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.5"><i class="fa fa-check"></i>Exercise 10.1.5.5</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.1"><i class="fa fa-check"></i>Exercise 10.2.3.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.2"><i class="fa fa-check"></i>Exercise 10.2.3.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.3"><i class="fa fa-check"></i>Exercise 10.2.3.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.1"><i class="fa fa-check"></i>Exercise 10.3.4.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.2"><i class="fa fa-check"></i>Exercise 10.3.4.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.3"><i class="fa fa-check"></i>Exercise 10.3.4.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.4"><i class="fa fa-check"></i>Exercise 10.3.4.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.5"><i class="fa fa-check"></i>Exercise 10.3.4.5</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="bookmarking.html"><a href="bookmarking.html"><i class="fa fa-check"></i><b>11</b> Bookmarking</a>
<ul>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.1"><i class="fa fa-check"></i>Exercise 11.3.1</a></li>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.2"><i class="fa fa-check"></i>Exercise 11.3.2</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidy-evaluation.html"><a href="tidy-evaluation.html"><i class="fa fa-check"></i><b>12</b> Tidy Evaluation</a></li>
<li class="chapter" data-level="13" data-path="general-guidelines.html"><a href="general-guidelines.html"><i class="fa fa-check"></i><b>13</b> General Guidelines</a></li>
<li class="chapter" data-level="14" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>14</b> Functions</a>
<ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.1"><i class="fa fa-check"></i>Exercise 14.4.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.2"><i class="fa fa-check"></i>Exercise 14.4.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.3"><i class="fa fa-check"></i>Exercise 14.4.3</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>15</b> Modules</a>
<ul>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.1"><i class="fa fa-check"></i>Exercise 15.6.1</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.2"><i class="fa fa-check"></i>Exercise 15.6.2</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.3"><i class="fa fa-check"></i>Exercise 15.6.3</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.4"><i class="fa fa-check"></i>Exercise 15.6.4</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.5"><i class="fa fa-check"></i>Exercise 15.6.5</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.6"><i class="fa fa-check"></i>Exercise 15.6.6</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>16</b> Packages</a></li>
<li class="chapter" data-level="17" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>17</b> Testing</a></li>
<li class="chapter" data-level="18" data-path="safety.html"><a href="safety.html"><i class="fa fa-check"></i><b>18</b> Safety</a></li>
<li class="chapter" data-level="19" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>19</b> Performance</a></li>
<li class="chapter" data-level="20" data-path="why-reactivity.html"><a href="why-reactivity.html"><i class="fa fa-check"></i><b>20</b> Why reactivity?</a></li>
<li class="chapter" data-level="21" data-path="dependency-tracking.html"><a href="dependency-tracking.html"><i class="fa fa-check"></i><b>21</b> Dependency Tracking</a></li>
<li class="chapter" data-level="22" data-path="scoping.html"><a href="scoping.html"><i class="fa fa-check"></i><b>22</b> Scoping</a></li>
<li class="chapter" data-level="23" data-path="reactive-components.html"><a href="reactive-components.html"><i class="fa fa-check"></i><b>23</b> Reactive Components</a></li>
<li class="chapter" data-level="24" data-path="advanced-ui.html"><a href="advanced-ui.html"><i class="fa fa-check"></i><b>24</b> Advanced UI</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mastering Shiny Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dynamic-ui" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Chapter 10</span> Dynamic UI<a href="dynamic-ui.html#dynamic-ui" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="TODO">
This chapter is in development...
</div>
<div id="exercise-10.1.5.1" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.1.5.1<a href="dynamic-ui.html#exercise-10.1.5.1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Complete the user interface below with a server function that updates <code>input$date</code> so that you can only select dates in <code>input$year</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="dynamic-ui.html#cb40-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb40-2"><a href="dynamic-ui.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">numericInput</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="at">value =</span> <span class="dv">2020</span>),</span>
<span id="cb40-3"><a href="dynamic-ui.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dateInput</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;date&quot;</span>)</span>
<span id="cb40-4"><a href="dynamic-ui.html#cb40-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-30" class="solution"><em>Solution</em>. </span></p>
<div id="solution-29" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-29" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This solution was a little wonky because it required shinyjs for the dateInput to properly update. I <a href="https://github.com/rstudio/shiny/issues/2798">opened up an issue here</a> since I think this is not the most intuitive answer.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="dynamic-ui.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb41-2"><a href="dynamic-ui.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyjs)</span>
<span id="cb41-3"><a href="dynamic-ui.html#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="dynamic-ui.html#cb41-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb41-5"><a href="dynamic-ui.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">useShinyjs</span>() ,</span>
<span id="cb41-6"><a href="dynamic-ui.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">numericInput</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="at">value =</span> <span class="dv">2020</span>),</span>
<span id="cb41-7"><a href="dynamic-ui.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dateInput</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;date&quot;</span>, <span class="at">value =</span> <span class="fu">Sys.Date</span>())</span>
<span id="cb41-8"><a href="dynamic-ui.html#cb41-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb41-9"><a href="dynamic-ui.html#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="dynamic-ui.html#cb41-10" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb41-11"><a href="dynamic-ui.html#cb41-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-12"><a href="dynamic-ui.html#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>year, {</span>
<span id="cb41-13"><a href="dynamic-ui.html#cb41-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-14"><a href="dynamic-ui.html#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(input<span class="sc">$</span>year) <span class="co"># stop if year is blank</span></span>
<span id="cb41-15"><a href="dynamic-ui.html#cb41-15" aria-hidden="true" tabindex="-1"></a>    daterange <span class="ot">&lt;-</span> <span class="fu">range</span>(<span class="fu">as.Date</span>(<span class="fu">paste0</span>(input<span class="sc">$</span>year, <span class="st">&quot;-01-01&quot;</span>)),<span class="fu">as.Date</span>(<span class="fu">paste0</span>(input<span class="sc">$</span>year, <span class="st">&quot;-12-31&quot;</span>)))</span>
<span id="cb41-16"><a href="dynamic-ui.html#cb41-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateDateInput</span>(session, <span class="st">&quot;date&quot;</span>, <span class="at">min =</span> daterange[<span class="dv">1</span>], <span class="at">max =</span> daterange[<span class="dv">2</span>] )</span>
<span id="cb41-17"><a href="dynamic-ui.html#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">delay</span>(<span class="dv">250</span>,  <span class="co"># delay 250ms</span></span>
<span id="cb41-18"><a href="dynamic-ui.html#cb41-18" aria-hidden="true" tabindex="-1"></a>          <span class="fu">updateDateInput</span>(session,<span class="st">&quot;date&quot;</span>,</span>
<span id="cb41-19"><a href="dynamic-ui.html#cb41-19" aria-hidden="true" tabindex="-1"></a>                          <span class="at">value =</span> daterange[<span class="dv">1</span>]</span>
<span id="cb41-20"><a href="dynamic-ui.html#cb41-20" aria-hidden="true" tabindex="-1"></a>          ))</span>
<span id="cb41-21"><a href="dynamic-ui.html#cb41-21" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb41-22"><a href="dynamic-ui.html#cb41-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-23"><a href="dynamic-ui.html#cb41-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-24"><a href="dynamic-ui.html#cb41-24" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.1.5.2" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.1.5.2<a href="dynamic-ui.html#exercise-10.1.5.2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Complete the user interface below with a server function that updates <code>input$county</code> choices based on <code>input$state</code>. For an added challenge, also change the label from “County” to “Parrish” for Louisana and “Borrough” for “Alaska”.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="dynamic-ui.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openintro)</span>
<span id="cb42-2"><a href="dynamic-ui.html#cb42-2" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">unique</span>(county<span class="sc">$</span>state)</span>
<span id="cb42-3"><a href="dynamic-ui.html#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="dynamic-ui.html#cb42-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb42-5"><a href="dynamic-ui.html#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;state&quot;</span>, <span class="st">&quot;State&quot;</span>, <span class="at">choices =</span> states),</span>
<span id="cb42-6"><a href="dynamic-ui.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;county&quot;</span>, <span class="st">&quot;County&quot;</span>, <span class="at">choices =</span> <span class="cn">NULL</span>)</span>
<span id="cb42-7"><a href="dynamic-ui.html#cb42-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-31" class="solution"><em>Solution</em>. </span></p>
<div id="solution-30" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-30" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can use <code>updateSelectInput</code> to filter the county choices based on the user selected state. By making the label of <code>input$county</code> a reactive, we can use <code>switch</code> to change the label when either Alaska or Louisiana is selected.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="dynamic-ui.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb43-2"><a href="dynamic-ui.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb43-3"><a href="dynamic-ui.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openintro)</span>
<span id="cb43-4"><a href="dynamic-ui.html#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="dynamic-ui.html#cb43-5" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">unique</span>(county<span class="sc">$</span>state)</span>
<span id="cb43-6"><a href="dynamic-ui.html#cb43-6" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">unique</span>(county<span class="sc">$</span>state)</span>
<span id="cb43-7"><a href="dynamic-ui.html#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="dynamic-ui.html#cb43-8" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb43-9"><a href="dynamic-ui.html#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;state&quot;</span>, <span class="st">&quot;State&quot;</span>, <span class="at">choices =</span> states),</span>
<span id="cb43-10"><a href="dynamic-ui.html#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;county&quot;</span>, <span class="st">&quot;County&quot;</span>, <span class="at">choices =</span> <span class="cn">NULL</span>)</span>
<span id="cb43-11"><a href="dynamic-ui.html#cb43-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-12"><a href="dynamic-ui.html#cb43-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-13"><a href="dynamic-ui.html#cb43-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-14"><a href="dynamic-ui.html#cb43-14" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb43-15"><a href="dynamic-ui.html#cb43-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-16"><a href="dynamic-ui.html#cb43-16" aria-hidden="true" tabindex="-1"></a>  label <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb43-17"><a href="dynamic-ui.html#cb43-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span>(input<span class="sc">$</span>state,</span>
<span id="cb43-18"><a href="dynamic-ui.html#cb43-18" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;Alaska&quot;</span> <span class="ot">=</span> <span class="st">&quot;Burrough&quot;</span>,</span>
<span id="cb43-19"><a href="dynamic-ui.html#cb43-19" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;Louisiana&quot;</span> <span class="ot">=</span> <span class="st">&quot;Parish&quot;</span>,</span>
<span id="cb43-20"><a href="dynamic-ui.html#cb43-20" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;County&quot;</span>)</span>
<span id="cb43-21"><a href="dynamic-ui.html#cb43-21" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb43-22"><a href="dynamic-ui.html#cb43-22" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb43-23"><a href="dynamic-ui.html#cb43-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>state, {</span>
<span id="cb43-24"><a href="dynamic-ui.html#cb43-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateSelectInput</span>(session, <span class="st">&quot;county&quot;</span>, <span class="at">label =</span> <span class="fu">label</span>(),</span>
<span id="cb43-25"><a href="dynamic-ui.html#cb43-25" aria-hidden="true" tabindex="-1"></a>                      <span class="at">choices =</span> county <span class="sc">%&gt;%</span> </span>
<span id="cb43-26"><a href="dynamic-ui.html#cb43-26" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">filter</span>(state <span class="sc">==</span> input<span class="sc">$</span>state) <span class="sc">%&gt;%</span></span>
<span id="cb43-27"><a href="dynamic-ui.html#cb43-27" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">select</span>(name) <span class="sc">%&gt;%</span></span>
<span id="cb43-28"><a href="dynamic-ui.html#cb43-28" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">distinct</span>())</span>
<span id="cb43-29"><a href="dynamic-ui.html#cb43-29" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb43-30"><a href="dynamic-ui.html#cb43-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-31"><a href="dynamic-ui.html#cb43-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-32"><a href="dynamic-ui.html#cb43-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-33"><a href="dynamic-ui.html#cb43-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-34"><a href="dynamic-ui.html#cb43-34" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.1.5.3" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.1.5.3<a href="dynamic-ui.html#exercise-10.1.5.3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Complete the user interface below with a server function that updates <code>input$country</code> choices based on the <code>input$continent</code>. Use <code>output$data</code> to display all matching rows.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="dynamic-ui.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb44-2"><a href="dynamic-ui.html#cb44-2" aria-hidden="true" tabindex="-1"></a>continents <span class="ot">&lt;-</span> <span class="fu">unique</span>(gapminder<span class="sc">$</span>continent)</span>
<span id="cb44-3"><a href="dynamic-ui.html#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="dynamic-ui.html#cb44-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb44-5"><a href="dynamic-ui.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;continent&quot;</span>, <span class="st">&quot;Continent&quot;</span>, <span class="at">choices =</span> continents), </span>
<span id="cb44-6"><a href="dynamic-ui.html#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;Country&quot;</span>, <span class="at">choices =</span> <span class="cn">NULL</span>),</span>
<span id="cb44-7"><a href="dynamic-ui.html#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tableOutput</span>(<span class="st">&quot;data&quot;</span>)</span>
<span id="cb44-8"><a href="dynamic-ui.html#cb44-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-32" class="solution"><em>Solution</em>. </span></p>
<div id="solution-31" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-31" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As the question above, we are filtering the country input based on the continent by using <code>updateSelectInput</code> in the server. By storing the selected data in a reactive, <code>selected_data()</code> we can use the same filtered dataset for our <code>selectInput</code> and the table, reducing code redundancy.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="dynamic-ui.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb45-2"><a href="dynamic-ui.html#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="dynamic-ui.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb45-4"><a href="dynamic-ui.html#cb45-4" aria-hidden="true" tabindex="-1"></a>continents <span class="ot">&lt;-</span> <span class="fu">unique</span>(gapminder<span class="sc">$</span>continent)</span>
<span id="cb45-5"><a href="dynamic-ui.html#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="dynamic-ui.html#cb45-6" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb45-7"><a href="dynamic-ui.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;continent&quot;</span>, <span class="st">&quot;Continent&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="fu">as.character</span>(continents))), </span>
<span id="cb45-8"><a href="dynamic-ui.html#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;Country&quot;</span>, <span class="at">choices =</span> <span class="cn">NULL</span>),</span>
<span id="cb45-9"><a href="dynamic-ui.html#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tableOutput</span>(<span class="st">&quot;data&quot;</span>)</span>
<span id="cb45-10"><a href="dynamic-ui.html#cb45-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-11"><a href="dynamic-ui.html#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="dynamic-ui.html#cb45-12" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb45-13"><a href="dynamic-ui.html#cb45-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-14"><a href="dynamic-ui.html#cb45-14" aria-hidden="true" tabindex="-1"></a>  selected_data <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb45-15"><a href="dynamic-ui.html#cb45-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(input<span class="sc">$</span>continent <span class="sc">%in%</span> continents) {</span>
<span id="cb45-16"><a href="dynamic-ui.html#cb45-16" aria-hidden="true" tabindex="-1"></a>      gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb45-17"><a href="dynamic-ui.html#cb45-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(continent <span class="sc">==</span> input<span class="sc">$</span>continent)</span>
<span id="cb45-18"><a href="dynamic-ui.html#cb45-18" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb45-19"><a href="dynamic-ui.html#cb45-19" aria-hidden="true" tabindex="-1"></a>      gapminder</span>
<span id="cb45-20"><a href="dynamic-ui.html#cb45-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb45-21"><a href="dynamic-ui.html#cb45-21" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb45-22"><a href="dynamic-ui.html#cb45-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-23"><a href="dynamic-ui.html#cb45-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>continent, {</span>
<span id="cb45-24"><a href="dynamic-ui.html#cb45-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateSelectInput</span>(session, <span class="st">&quot;country&quot;</span>, <span class="st">&quot;Country&quot;</span>,</span>
<span id="cb45-25"><a href="dynamic-ui.html#cb45-25" aria-hidden="true" tabindex="-1"></a>                      <span class="at">choices =</span> <span class="fu">selected_data</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb45-26"><a href="dynamic-ui.html#cb45-26" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">select</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb45-27"><a href="dynamic-ui.html#cb45-27" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">distinct</span>())</span>
<span id="cb45-28"><a href="dynamic-ui.html#cb45-28" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb45-29"><a href="dynamic-ui.html#cb45-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-30"><a href="dynamic-ui.html#cb45-30" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>data <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({ </span>
<span id="cb45-31"><a href="dynamic-ui.html#cb45-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">selected_data</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb45-32"><a href="dynamic-ui.html#cb45-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(country <span class="sc">==</span> input<span class="sc">$</span>country) </span>
<span id="cb45-33"><a href="dynamic-ui.html#cb45-33" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb45-34"><a href="dynamic-ui.html#cb45-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-35"><a href="dynamic-ui.html#cb45-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-36"><a href="dynamic-ui.html#cb45-36" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.1.5.4" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.1.5.4<a href="dynamic-ui.html#exercise-10.1.5.4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Extend the previous app so that you can also choose to select no continent, and hence see all countries. You’ll need to add “” to the list of choices, and then handle that specially when filtering.</p>
<div class="solution">
<p><span id="unlabeled-div-33" class="solution"><em>Solution</em>. </span></p>
<div id="solution-32" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-32" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="note">
<p>Initially setting the choices to <code>c("", as.character(continents))</code> allows the user to see all the Country options prior to a continent being selected. That said, once a continent is selected this <code>""</code> option is no longer available.</p>
</div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="dynamic-ui.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb46-2"><a href="dynamic-ui.html#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="dynamic-ui.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb46-4"><a href="dynamic-ui.html#cb46-4" aria-hidden="true" tabindex="-1"></a>continents <span class="ot">&lt;-</span> <span class="fu">unique</span>(gapminder<span class="sc">$</span>continent)</span>
<span id="cb46-5"><a href="dynamic-ui.html#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="dynamic-ui.html#cb46-6" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb46-7"><a href="dynamic-ui.html#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;continent&quot;</span>, <span class="st">&quot;Continent&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="fu">as.character</span>(continents))), </span>
<span id="cb46-8"><a href="dynamic-ui.html#cb46-8" aria-hidden="true" tabindex="-1"></a>   <span class="co"># @tanho63:</span></span>
<span id="cb46-9"><a href="dynamic-ui.html#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># selectInput(&quot;continent&quot;, &quot;Continent&quot;, choices = c(&quot;All&quot;, as.character(continents))), </span></span>
<span id="cb46-10"><a href="dynamic-ui.html#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;Country&quot;</span>, <span class="at">choices =</span> <span class="cn">NULL</span>),</span>
<span id="cb46-11"><a href="dynamic-ui.html#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tableOutput</span>(<span class="st">&quot;data&quot;</span>)</span>
<span id="cb46-12"><a href="dynamic-ui.html#cb46-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-13"><a href="dynamic-ui.html#cb46-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-14"><a href="dynamic-ui.html#cb46-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-15"><a href="dynamic-ui.html#cb46-15" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb46-16"><a href="dynamic-ui.html#cb46-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-17"><a href="dynamic-ui.html#cb46-17" aria-hidden="true" tabindex="-1"></a>  selected_data <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb46-18"><a href="dynamic-ui.html#cb46-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(input<span class="sc">$</span>continent <span class="sc">%in%</span> continents) {</span>
<span id="cb46-19"><a href="dynamic-ui.html#cb46-19" aria-hidden="true" tabindex="-1"></a>      gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb46-20"><a href="dynamic-ui.html#cb46-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(continent <span class="sc">==</span> input<span class="sc">$</span>continent)</span>
<span id="cb46-21"><a href="dynamic-ui.html#cb46-21" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb46-22"><a href="dynamic-ui.html#cb46-22" aria-hidden="true" tabindex="-1"></a>      gapminder</span>
<span id="cb46-23"><a href="dynamic-ui.html#cb46-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb46-24"><a href="dynamic-ui.html#cb46-24" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb46-25"><a href="dynamic-ui.html#cb46-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-26"><a href="dynamic-ui.html#cb46-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>continent, {</span>
<span id="cb46-27"><a href="dynamic-ui.html#cb46-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-28"><a href="dynamic-ui.html#cb46-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># @tanho63:</span></span>
<span id="cb46-29"><a href="dynamic-ui.html#cb46-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateSelectInput</span>(session, <span class="st">&quot;country&quot;</span>,</span>
<span id="cb46-30"><a href="dynamic-ui.html#cb46-30" aria-hidden="true" tabindex="-1"></a>                      <span class="at">choices =</span> <span class="fu">unique</span>(<span class="fu">selected_data</span>()<span class="sc">$</span>country))</span>
<span id="cb46-31"><a href="dynamic-ui.html#cb46-31" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb46-32"><a href="dynamic-ui.html#cb46-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-33"><a href="dynamic-ui.html#cb46-33" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>data <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({ </span>
<span id="cb46-34"><a href="dynamic-ui.html#cb46-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">selected_data</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb46-35"><a href="dynamic-ui.html#cb46-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(country <span class="sc">==</span> input<span class="sc">$</span>country) </span>
<span id="cb46-36"><a href="dynamic-ui.html#cb46-36" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb46-37"><a href="dynamic-ui.html#cb46-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-38"><a href="dynamic-ui.html#cb46-38" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-39"><a href="dynamic-ui.html#cb46-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-40"><a href="dynamic-ui.html#cb46-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-41"><a href="dynamic-ui.html#cb46-41" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.1.5.5" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.1.5.5<a href="dynamic-ui.html#exercise-10.1.5.5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>What is at the heart of the problem described at <a href="https://community.rstudio.com/t/29307" class="uri">https://community.rstudio.com/t/29307</a>?</p>
<div class="solution">
<p><span id="unlabeled-div-34" class="solution"><em>Solution</em>. </span></p>
<div id="solution-33" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-33" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Updating all three sliders creates a circular reference!</p>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.2.3.1" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.2.3.1<a href="dynamic-ui.html#exercise-10.2.3.1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use a hidden tabset to show additional controls only if the user checks an “advanced” check box.</p>
<div class="solution">
<p><span id="unlabeled-div-35" class="solution"><em>Solution</em>. </span></p>
<div id="solution-34" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-34" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="dynamic-ui.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb47-2"><a href="dynamic-ui.html#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="dynamic-ui.html#cb47-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb47-4"><a href="dynamic-ui.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb47-5"><a href="dynamic-ui.html#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb47-6"><a href="dynamic-ui.html#cb47-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">checkboxInput</span>(<span class="st">&quot;moreControls&quot;</span>, </span>
<span id="cb47-7"><a href="dynamic-ui.html#cb47-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">&quot;Show advanced controls?&quot;</span>,</span>
<span id="cb47-8"><a href="dynamic-ui.html#cb47-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">value =</span> <span class="cn">FALSE</span></span>
<span id="cb47-9"><a href="dynamic-ui.html#cb47-9" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb47-10"><a href="dynamic-ui.html#cb47-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb47-11"><a href="dynamic-ui.html#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb47-12"><a href="dynamic-ui.html#cb47-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tabsetPanel</span>(</span>
<span id="cb47-13"><a href="dynamic-ui.html#cb47-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">id =</span> <span class="st">&quot;basic&quot;</span>,</span>
<span id="cb47-14"><a href="dynamic-ui.html#cb47-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;hidden&quot;</span>,</span>
<span id="cb47-15"><a href="dynamic-ui.html#cb47-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;panel1&quot;</span>,</span>
<span id="cb47-16"><a href="dynamic-ui.html#cb47-16" aria-hidden="true" tabindex="-1"></a>          <span class="fu">numericInput</span>(<span class="st">&quot;basicControl&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Basic:&quot;</span>, <span class="dv">0</span>),</span>
<span id="cb47-17"><a href="dynamic-ui.html#cb47-17" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb47-18"><a href="dynamic-ui.html#cb47-18" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb47-19"><a href="dynamic-ui.html#cb47-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tabsetPanel</span>(</span>
<span id="cb47-20"><a href="dynamic-ui.html#cb47-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">id =</span> <span class="st">&quot;advanced&quot;</span>,</span>
<span id="cb47-21"><a href="dynamic-ui.html#cb47-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;hidden&quot;</span>,</span>
<span id="cb47-22"><a href="dynamic-ui.html#cb47-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;emptyPanel&quot;</span>, <span class="at">style =</span> <span class="st">&quot;display: none&quot;</span>),</span>
<span id="cb47-23"><a href="dynamic-ui.html#cb47-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;panel2&quot;</span>,</span>
<span id="cb47-24"><a href="dynamic-ui.html#cb47-24" aria-hidden="true" tabindex="-1"></a>          <span class="fu">numericInput</span>(<span class="st">&quot;advancedCotrol&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Advanced:&quot;</span>, <span class="dv">1</span>)</span>
<span id="cb47-25"><a href="dynamic-ui.html#cb47-25" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb47-26"><a href="dynamic-ui.html#cb47-26" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb47-27"><a href="dynamic-ui.html#cb47-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb47-28"><a href="dynamic-ui.html#cb47-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-29"><a href="dynamic-ui.html#cb47-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-30"><a href="dynamic-ui.html#cb47-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-31"><a href="dynamic-ui.html#cb47-31" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb47-32"><a href="dynamic-ui.html#cb47-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>moreControls, {</span>
<span id="cb47-33"><a href="dynamic-ui.html#cb47-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>moreControls) {</span>
<span id="cb47-34"><a href="dynamic-ui.html#cb47-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">updateTabsetPanel</span>(session, <span class="st">&quot;advanced&quot;</span>, <span class="at">selected =</span> <span class="st">&quot;panel2&quot;</span>)</span>
<span id="cb47-35"><a href="dynamic-ui.html#cb47-35" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb47-36"><a href="dynamic-ui.html#cb47-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">updateTabsetPanel</span>(session, <span class="st">&quot;advanced&quot;</span>, <span class="at">selected =</span> <span class="st">&quot;emptyPanel&quot;</span>)</span>
<span id="cb47-37"><a href="dynamic-ui.html#cb47-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb47-38"><a href="dynamic-ui.html#cb47-38" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb47-39"><a href="dynamic-ui.html#cb47-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-40"><a href="dynamic-ui.html#cb47-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-41"><a href="dynamic-ui.html#cb47-41" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.2.3.2" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.2.3.2<a href="dynamic-ui.html#exercise-10.2.3.2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create an app that plots <code>ggplot(diamonds, aes(carat))</code> but allows the user to choose which geom to use: <code>geom_histogram()</code>, <code>geom_freqpoly()</code>, or <code>geom_density()</code>. Use a hidden tabset to allow the user to select different arguments depending on the geom: <code>geom_histogram()</code> and <code>geom_freqpoly()</code> have a <code>binwidth</code> argument; <code>geom_density()</code> has a <code>bw</code> argument.</p>
<div class="solution">
<p><span id="unlabeled-div-36" class="solution"><em>Solution</em>. </span></p>
<div id="solution-35" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-35" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="dynamic-ui.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb48-2"><a href="dynamic-ui.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb48-3"><a href="dynamic-ui.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="dynamic-ui.html#cb48-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb48-5"><a href="dynamic-ui.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb48-6"><a href="dynamic-ui.html#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb48-7"><a href="dynamic-ui.html#cb48-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">&quot;geom&quot;</span>, <span class="st">&quot;Geom function to use&quot;</span>, </span>
<span id="cb48-8"><a href="dynamic-ui.html#cb48-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;histogram&quot;</span>, <span class="st">&quot;freqpoly&quot;</span>, <span class="st">&quot;density&quot;</span>)</span>
<span id="cb48-9"><a href="dynamic-ui.html#cb48-9" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb48-10"><a href="dynamic-ui.html#cb48-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tabsetPanel</span>(</span>
<span id="cb48-11"><a href="dynamic-ui.html#cb48-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">id =</span> <span class="st">&quot;params&quot;</span>,</span>
<span id="cb48-12"><a href="dynamic-ui.html#cb48-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;hidden&quot;</span>,</span>
<span id="cb48-13"><a href="dynamic-ui.html#cb48-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(<span class="st">&quot;histogram&quot;</span>,</span>
<span id="cb48-14"><a href="dynamic-ui.html#cb48-14" aria-hidden="true" tabindex="-1"></a>          <span class="fu">numericInput</span>(<span class="st">&quot;hist_bw&quot;</span>, </span>
<span id="cb48-15"><a href="dynamic-ui.html#cb48-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> <span class="st">&quot;Binwidth&quot;</span>, <span class="at">value =</span> <span class="fl">0.1</span>, </span>
<span id="cb48-16"><a href="dynamic-ui.html#cb48-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fl">0.1</span>, <span class="at">max =</span> <span class="dv">5</span>, <span class="at">step =</span> <span class="fl">0.1</span></span>
<span id="cb48-17"><a href="dynamic-ui.html#cb48-17" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb48-18"><a href="dynamic-ui.html#cb48-18" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb48-19"><a href="dynamic-ui.html#cb48-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(<span class="st">&quot;freqpoly&quot;</span>, </span>
<span id="cb48-20"><a href="dynamic-ui.html#cb48-20" aria-hidden="true" tabindex="-1"></a>          <span class="fu">numericInput</span>(<span class="st">&quot;freqpoly_bw&quot;</span>, </span>
<span id="cb48-21"><a href="dynamic-ui.html#cb48-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> <span class="st">&quot;Binwidth&quot;</span>, <span class="at">value =</span> <span class="fl">0.1</span>, </span>
<span id="cb48-22"><a href="dynamic-ui.html#cb48-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fl">0.1</span>, <span class="at">max =</span> <span class="dv">5</span>, <span class="at">step =</span> <span class="fl">0.1</span></span>
<span id="cb48-23"><a href="dynamic-ui.html#cb48-23" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb48-24"><a href="dynamic-ui.html#cb48-24" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb48-25"><a href="dynamic-ui.html#cb48-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(<span class="st">&quot;density&quot;</span>,</span>
<span id="cb48-26"><a href="dynamic-ui.html#cb48-26" aria-hidden="true" tabindex="-1"></a>          <span class="fu">numericInput</span>(<span class="st">&quot;density_bw&quot;</span>, </span>
<span id="cb48-27"><a href="dynamic-ui.html#cb48-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> <span class="st">&quot;Standard deviation of smoothing kernel&quot;</span>,</span>
<span id="cb48-28"><a href="dynamic-ui.html#cb48-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">value =</span> <span class="fl">0.01</span>, <span class="at">min =</span> <span class="fl">0.01</span>, <span class="at">max =</span> <span class="dv">1</span>, <span class="at">step =</span> <span class="fl">0.01</span></span>
<span id="cb48-29"><a href="dynamic-ui.html#cb48-29" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb48-30"><a href="dynamic-ui.html#cb48-30" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb48-31"><a href="dynamic-ui.html#cb48-31" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb48-32"><a href="dynamic-ui.html#cb48-32" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb48-33"><a href="dynamic-ui.html#cb48-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb48-34"><a href="dynamic-ui.html#cb48-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;gg&quot;</span>)</span>
<span id="cb48-35"><a href="dynamic-ui.html#cb48-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-36"><a href="dynamic-ui.html#cb48-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-37"><a href="dynamic-ui.html#cb48-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-38"><a href="dynamic-ui.html#cb48-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-39"><a href="dynamic-ui.html#cb48-39" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb48-40"><a href="dynamic-ui.html#cb48-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>geom, {</span>
<span id="cb48-41"><a href="dynamic-ui.html#cb48-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateTabsetPanel</span>(<span class="at">inputId =</span> <span class="st">&quot;params&quot;</span>, <span class="at">selected =</span> input<span class="sc">$</span>geom)</span>
<span id="cb48-42"><a href="dynamic-ui.html#cb48-42" aria-hidden="true" tabindex="-1"></a>  }) </span>
<span id="cb48-43"><a href="dynamic-ui.html#cb48-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-44"><a href="dynamic-ui.html#cb48-44" aria-hidden="true" tabindex="-1"></a>  gg_args <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb48-45"><a href="dynamic-ui.html#cb48-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span>(input<span class="sc">$</span>geom, </span>
<span id="cb48-46"><a href="dynamic-ui.html#cb48-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">histogram =</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> input<span class="sc">$</span>hist_bw),</span>
<span id="cb48-47"><a href="dynamic-ui.html#cb48-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">freqpoly =</span> <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> input<span class="sc">$</span>freqpoly_bw),</span>
<span id="cb48-48"><a href="dynamic-ui.html#cb48-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">density =</span> <span class="fu">geom_density</span>(<span class="at">bw =</span> input<span class="sc">$</span>density_bw)</span>
<span id="cb48-49"><a href="dynamic-ui.html#cb48-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-50"><a href="dynamic-ui.html#cb48-50" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb48-51"><a href="dynamic-ui.html#cb48-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-52"><a href="dynamic-ui.html#cb48-52" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>gg <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb48-53"><a href="dynamic-ui.html#cb48-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat)) <span class="sc">+</span></span>
<span id="cb48-54"><a href="dynamic-ui.html#cb48-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gg_args</span>()</span>
<span id="cb48-55"><a href="dynamic-ui.html#cb48-55" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb48-56"><a href="dynamic-ui.html#cb48-56" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-57"><a href="dynamic-ui.html#cb48-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-58"><a href="dynamic-ui.html#cb48-58" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.2.3.3" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.2.3.3<a href="dynamic-ui.html#exercise-10.2.3.3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Modify the app you created in the previous exercise to allow the user to choose whether each geom is shown or not (i.e. instead of always using one geom, they can picked 0, 1, 2, or 3). Make sure that you can control the binwidth of the histogram and frequency polygon independently.</p>
<div class="solution">
<p><span id="unlabeled-div-37" class="solution"><em>Solution</em>. </span></p>
<div id="solution-36" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-36" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="dynamic-ui.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb49-2"><a href="dynamic-ui.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb49-3"><a href="dynamic-ui.html#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="dynamic-ui.html#cb49-4" aria-hidden="true" tabindex="-1"></a>geom_choices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;histogram&quot;</span>, <span class="st">&quot;freqpoly&quot;</span>, <span class="st">&quot;density&quot;</span>)</span>
<span id="cb49-5"><a href="dynamic-ui.html#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="dynamic-ui.html#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ----------------------------------------------- #</span></span>
<span id="cb49-7"><a href="dynamic-ui.html#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co">#    Generate the necessary code (as a string)    #</span></span>
<span id="cb49-8"><a href="dynamic-ui.html#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="co">#    for ggplot, after having chosen one of       #</span></span>
<span id="cb49-9"><a href="dynamic-ui.html#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="co">#    the available geom functions in the ui       #</span></span>
<span id="cb49-10"><a href="dynamic-ui.html#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ----------------------------------------------- #</span></span>
<span id="cb49-11"><a href="dynamic-ui.html#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="co"># A list could be used, working only with the three</span></span>
<span id="cb49-12"><a href="dynamic-ui.html#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="co"># provided geom choices, but a fuction will be used,</span></span>
<span id="cb49-13"><a href="dynamic-ui.html#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="co"># to provide a template for a possible generalization </span></span>
<span id="cb49-14"><a href="dynamic-ui.html#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="co"># when working with more geom choices and parameters.</span></span>
<span id="cb49-15"><a href="dynamic-ui.html#cb49-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-16"><a href="dynamic-ui.html#cb49-16" aria-hidden="true" tabindex="-1"></a>geom_choice_code <span class="ot">&lt;-</span> <span class="cf">function</span>(geom_choice) {</span>
<span id="cb49-17"><a href="dynamic-ui.html#cb49-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Using %in% could be a more general case,</span></span>
<span id="cb49-18"><a href="dynamic-ui.html#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># considering more possible geom options.</span></span>
<span id="cb49-19"><a href="dynamic-ui.html#cb49-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (geom_choice <span class="sc">==</span> <span class="st">&quot;density&quot;</span>) { </span>
<span id="cb49-20"><a href="dynamic-ui.html#cb49-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste0</span>(</span>
<span id="cb49-21"><a href="dynamic-ui.html#cb49-21" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Simple density</span></span>
<span id="cb49-22"><a href="dynamic-ui.html#cb49-22" aria-hidden="true" tabindex="-1"></a>      <span class="co"># &quot;geom_&quot;, geom_choice, &quot;(bw = input$&quot;, geom_choice, &quot;_bw)&quot;</span></span>
<span id="cb49-23"><a href="dynamic-ui.html#cb49-23" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-24"><a href="dynamic-ui.html#cb49-24" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Match density to the histogram&#39;s y-scale</span></span>
<span id="cb49-25"><a href="dynamic-ui.html#cb49-25" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;geom_density(</span></span>
<span id="cb49-26"><a href="dynamic-ui.html#cb49-26" aria-hidden="true" tabindex="-1"></a><span class="st">        color = &#39;blue&#39;,</span></span>
<span id="cb49-27"><a href="dynamic-ui.html#cb49-27" aria-hidden="true" tabindex="-1"></a><span class="st">        bw = input$density_bw,</span></span>
<span id="cb49-28"><a href="dynamic-ui.html#cb49-28" aria-hidden="true" tabindex="-1"></a><span class="st">        aes(y = ..density.. * (nrow(diamonds) * input$histogram_bw))</span></span>
<span id="cb49-29"><a href="dynamic-ui.html#cb49-29" aria-hidden="true" tabindex="-1"></a><span class="st">      )&quot;</span></span>
<span id="cb49-30"><a href="dynamic-ui.html#cb49-30" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb49-31"><a href="dynamic-ui.html#cb49-31" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb49-32"><a href="dynamic-ui.html#cb49-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-33"><a href="dynamic-ui.html#cb49-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">paste0</span>(</span>
<span id="cb49-34"><a href="dynamic-ui.html#cb49-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;geom_&quot;</span>, geom_choice, <span class="st">&quot;(&quot;</span>, </span>
<span id="cb49-35"><a href="dynamic-ui.html#cb49-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Improve histograms&#39; visibility</span></span>
<span id="cb49-36"><a href="dynamic-ui.html#cb49-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ifelse</span>(geom_choice <span class="sc">==</span> <span class="st">&quot;histogram&quot;</span>, <span class="st">&quot;fill = &#39;transparent&#39;, color = &#39;red&#39;, &quot;</span>, <span class="st">&quot;&quot;</span>),</span>
<span id="cb49-37"><a href="dynamic-ui.html#cb49-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-38"><a href="dynamic-ui.html#cb49-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;binwidth = input$&quot;</span>, geom_choice, <span class="st">&quot;_bw)&quot;</span></span>
<span id="cb49-39"><a href="dynamic-ui.html#cb49-39" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb49-40"><a href="dynamic-ui.html#cb49-40" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-41"><a href="dynamic-ui.html#cb49-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-42"><a href="dynamic-ui.html#cb49-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-43"><a href="dynamic-ui.html#cb49-43" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb49-44"><a href="dynamic-ui.html#cb49-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb49-45"><a href="dynamic-ui.html#cb49-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb49-46"><a href="dynamic-ui.html#cb49-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">&quot;geom&quot;</span>, </span>
<span id="cb49-47"><a href="dynamic-ui.html#cb49-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">&quot;Geom function to use&quot;</span>, <span class="at">multiple =</span> <span class="cn">TRUE</span>,</span>
<span id="cb49-48"><a href="dynamic-ui.html#cb49-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> geom_choices, <span class="at">selected =</span> <span class="st">&quot;histogram&quot;</span></span>
<span id="cb49-49"><a href="dynamic-ui.html#cb49-49" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb49-50"><a href="dynamic-ui.html#cb49-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tabsetPanel</span>(</span>
<span id="cb49-51"><a href="dynamic-ui.html#cb49-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">id =</span> <span class="st">&quot;histogram&quot;</span>,</span>
<span id="cb49-52"><a href="dynamic-ui.html#cb49-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;hidden&quot;</span>,</span>
<span id="cb49-53"><a href="dynamic-ui.html#cb49-53" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;histogram_empty&quot;</span>, <span class="at">style =</span> <span class="st">&quot;display: none&quot;</span>),</span>
<span id="cb49-54"><a href="dynamic-ui.html#cb49-54" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;histogram_params&quot;</span>,</span>
<span id="cb49-55"><a href="dynamic-ui.html#cb49-55" aria-hidden="true" tabindex="-1"></a>          <span class="co"># This parameter will also be used to scale the y-axis</span></span>
<span id="cb49-56"><a href="dynamic-ui.html#cb49-56" aria-hidden="true" tabindex="-1"></a>          <span class="co"># when plotting density, so that all graphics</span></span>
<span id="cb49-57"><a href="dynamic-ui.html#cb49-57" aria-hidden="true" tabindex="-1"></a>          <span class="co"># have a similar y-axis of &quot;count&quot;</span></span>
<span id="cb49-58"><a href="dynamic-ui.html#cb49-58" aria-hidden="true" tabindex="-1"></a>          <span class="fu">numericInput</span>(<span class="st">&quot;histogram_bw&quot;</span>, </span>
<span id="cb49-59"><a href="dynamic-ui.html#cb49-59" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> <span class="st">&quot;Histogram&#39;s binwidth&quot;</span>, <span class="at">value =</span> <span class="fl">0.15</span>, </span>
<span id="cb49-60"><a href="dynamic-ui.html#cb49-60" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fl">0.1</span>, <span class="at">max =</span> <span class="dv">5</span>, <span class="at">step =</span> <span class="fl">0.1</span></span>
<span id="cb49-61"><a href="dynamic-ui.html#cb49-61" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb49-62"><a href="dynamic-ui.html#cb49-62" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-63"><a href="dynamic-ui.html#cb49-63" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb49-64"><a href="dynamic-ui.html#cb49-64" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tabsetPanel</span>(</span>
<span id="cb49-65"><a href="dynamic-ui.html#cb49-65" aria-hidden="true" tabindex="-1"></a>        <span class="at">id =</span> <span class="st">&quot;freqpoly&quot;</span>,</span>
<span id="cb49-66"><a href="dynamic-ui.html#cb49-66" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;hidden&quot;</span>,</span>
<span id="cb49-67"><a href="dynamic-ui.html#cb49-67" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;freqpoly_empty&quot;</span>, <span class="at">style =</span> <span class="st">&quot;display: none&quot;</span>),</span>
<span id="cb49-68"><a href="dynamic-ui.html#cb49-68" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;freqpoly_params&quot;</span>, </span>
<span id="cb49-69"><a href="dynamic-ui.html#cb49-69" aria-hidden="true" tabindex="-1"></a>          <span class="fu">numericInput</span>(<span class="st">&quot;freqpoly_bw&quot;</span>, </span>
<span id="cb49-70"><a href="dynamic-ui.html#cb49-70" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> <span class="st">&quot;freqpoly&#39;s binwidth&quot;</span>, <span class="at">value =</span> <span class="fl">0.15</span>, </span>
<span id="cb49-71"><a href="dynamic-ui.html#cb49-71" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fl">0.1</span>, <span class="at">max =</span> <span class="dv">5</span>, <span class="at">step =</span> <span class="fl">0.1</span></span>
<span id="cb49-72"><a href="dynamic-ui.html#cb49-72" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb49-73"><a href="dynamic-ui.html#cb49-73" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-74"><a href="dynamic-ui.html#cb49-74" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb49-75"><a href="dynamic-ui.html#cb49-75" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tabsetPanel</span>(</span>
<span id="cb49-76"><a href="dynamic-ui.html#cb49-76" aria-hidden="true" tabindex="-1"></a>        <span class="at">id =</span> <span class="st">&quot;density&quot;</span>,</span>
<span id="cb49-77"><a href="dynamic-ui.html#cb49-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;hidden&quot;</span>,</span>
<span id="cb49-78"><a href="dynamic-ui.html#cb49-78" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;density_empty&quot;</span>, <span class="at">style =</span> <span class="st">&quot;display: none&quot;</span>),</span>
<span id="cb49-79"><a href="dynamic-ui.html#cb49-79" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanelBody</span>(<span class="st">&quot;density_params&quot;</span>,</span>
<span id="cb49-80"><a href="dynamic-ui.html#cb49-80" aria-hidden="true" tabindex="-1"></a>          <span class="fu">numericInput</span>(<span class="st">&quot;density_bw&quot;</span>, </span>
<span id="cb49-81"><a href="dynamic-ui.html#cb49-81" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> <span class="st">&quot;Standard deviation of smoothing kernel&quot;</span>,</span>
<span id="cb49-82"><a href="dynamic-ui.html#cb49-82" aria-hidden="true" tabindex="-1"></a>            <span class="at">value =</span> <span class="fl">0.15</span>, <span class="at">min =</span> <span class="fl">0.01</span>, <span class="at">max =</span> <span class="dv">1</span>, <span class="at">step =</span> <span class="fl">0.01</span></span>
<span id="cb49-83"><a href="dynamic-ui.html#cb49-83" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb49-84"><a href="dynamic-ui.html#cb49-84" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-85"><a href="dynamic-ui.html#cb49-85" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb49-86"><a href="dynamic-ui.html#cb49-86" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-87"><a href="dynamic-ui.html#cb49-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb49-88"><a href="dynamic-ui.html#cb49-88" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">&quot;gg&quot;</span>)</span>
<span id="cb49-89"><a href="dynamic-ui.html#cb49-89" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-90"><a href="dynamic-ui.html#cb49-90" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-91"><a href="dynamic-ui.html#cb49-91" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-92"><a href="dynamic-ui.html#cb49-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-93"><a href="dynamic-ui.html#cb49-93" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb49-94"><a href="dynamic-ui.html#cb49-94" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ------------------------------------------ #</span></span>
<span id="cb49-95"><a href="dynamic-ui.html#cb49-95" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update inputs&#39; visibility in sidebar panel #</span></span>
<span id="cb49-96"><a href="dynamic-ui.html#cb49-96" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ------------------------------------------ #</span></span>
<span id="cb49-97"><a href="dynamic-ui.html#cb49-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>geom, {</span>
<span id="cb49-98"><a href="dynamic-ui.html#cb49-98" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get non selected geom functions, in order</span></span>
<span id="cb49-99"><a href="dynamic-ui.html#cb49-99" aria-hidden="true" tabindex="-1"></a>    <span class="co"># to hide their respective parameters</span></span>
<span id="cb49-100"><a href="dynamic-ui.html#cb49-100" aria-hidden="true" tabindex="-1"></a>    non_selected <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(geom_choices, input<span class="sc">$</span>geom)</span>
<span id="cb49-101"><a href="dynamic-ui.html#cb49-101" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb49-102"><a href="dynamic-ui.html#cb49-102" aria-hidden="true" tabindex="-1"></a>      geom_choices, </span>
<span id="cb49-103"><a href="dynamic-ui.html#cb49-103" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">updateTabsetPanel</span>(</span>
<span id="cb49-104"><a href="dynamic-ui.html#cb49-104" aria-hidden="true" tabindex="-1"></a>        <span class="at">inputId =</span> .x, </span>
<span id="cb49-105"><a href="dynamic-ui.html#cb49-105" aria-hidden="true" tabindex="-1"></a>        <span class="at">selected =</span> <span class="fu">paste0</span>(</span>
<span id="cb49-106"><a href="dynamic-ui.html#cb49-106" aria-hidden="true" tabindex="-1"></a>          .x, </span>
<span id="cb49-107"><a href="dynamic-ui.html#cb49-107" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ifelse</span>(.x <span class="sc">%in%</span> non_selected, <span class="st">&quot;_empty&quot;</span>, <span class="st">&quot;_params&quot;</span>)</span>
<span id="cb49-108"><a href="dynamic-ui.html#cb49-108" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-109"><a href="dynamic-ui.html#cb49-109" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb49-110"><a href="dynamic-ui.html#cb49-110" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-111"><a href="dynamic-ui.html#cb49-111" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Run this code also when the select input is cleared</span></span>
<span id="cb49-112"><a href="dynamic-ui.html#cb49-112" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">ignoreNULL =</span> <span class="cn">FALSE</span>) </span>
<span id="cb49-113"><a href="dynamic-ui.html#cb49-113" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-114"><a href="dynamic-ui.html#cb49-114" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ------------------------ #</span></span>
<span id="cb49-115"><a href="dynamic-ui.html#cb49-115" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Retrieve code for ggplot #</span></span>
<span id="cb49-116"><a href="dynamic-ui.html#cb49-116" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ------------------------ #</span></span>
<span id="cb49-117"><a href="dynamic-ui.html#cb49-117" aria-hidden="true" tabindex="-1"></a>  gg_args <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb49-118"><a href="dynamic-ui.html#cb49-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(input<span class="sc">$</span>geom)</span>
<span id="cb49-119"><a href="dynamic-ui.html#cb49-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-120"><a href="dynamic-ui.html#cb49-120" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map_chr</span>(input<span class="sc">$</span>geom, geom_choice_code) <span class="sc">|&gt;</span></span>
<span id="cb49-121"><a href="dynamic-ui.html#cb49-121" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)</span>
<span id="cb49-122"><a href="dynamic-ui.html#cb49-122" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb49-123"><a href="dynamic-ui.html#cb49-123" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-124"><a href="dynamic-ui.html#cb49-124" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>gg <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb49-125"><a href="dynamic-ui.html#cb49-125" aria-hidden="true" tabindex="-1"></a>    <span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text =</span> <span class="fu">paste0</span>(</span>
<span id="cb49-126"><a href="dynamic-ui.html#cb49-126" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;ggplot(diamonds, aes(carat)) + &quot;</span>,</span>
<span id="cb49-127"><a href="dynamic-ui.html#cb49-127" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gg_args</span>(), <span class="st">&quot; + &quot;</span>,</span>
<span id="cb49-128"><a href="dynamic-ui.html#cb49-128" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;labs(y = &#39;Count&#39;)&quot;</span></span>
<span id="cb49-129"><a href="dynamic-ui.html#cb49-129" aria-hidden="true" tabindex="-1"></a>    )))</span>
<span id="cb49-130"><a href="dynamic-ui.html#cb49-130" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb49-131"><a href="dynamic-ui.html#cb49-131" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-132"><a href="dynamic-ui.html#cb49-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-133"><a href="dynamic-ui.html#cb49-133" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.3.4.1" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.3.4.1<a href="dynamic-ui.html#exercise-10.3.4.1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Take this very simple app based on the initial example in the chapter:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="dynamic-ui.html#cb50-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb50-2"><a href="dynamic-ui.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;type&quot;</span>, <span class="st">&quot;type&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;slider&quot;</span>, <span class="st">&quot;numeric&quot;</span>)),</span>
<span id="cb50-3"><a href="dynamic-ui.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">uiOutput</span>(<span class="st">&quot;numeric&quot;</span>)</span>
<span id="cb50-4"><a href="dynamic-ui.html#cb50-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-5"><a href="dynamic-ui.html#cb50-5" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb50-6"><a href="dynamic-ui.html#cb50-6" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>numeric <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb50-7"><a href="dynamic-ui.html#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>type <span class="sc">==</span> <span class="st">&quot;slider&quot;</span>) {</span>
<span id="cb50-8"><a href="dynamic-ui.html#cb50-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sliderInput</span>(<span class="st">&quot;n&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="at">value =</span> <span class="dv">0</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>)</span>
<span id="cb50-9"><a href="dynamic-ui.html#cb50-9" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb50-10"><a href="dynamic-ui.html#cb50-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">numericInput</span>(<span class="st">&quot;n&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="at">value =</span> <span class="dv">0</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>)  </span>
<span id="cb50-11"><a href="dynamic-ui.html#cb50-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb50-12"><a href="dynamic-ui.html#cb50-12" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb50-13"><a href="dynamic-ui.html#cb50-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>How could you instead implement it using dynamic visibility? If you implement dynamic visibility, how could you keep the values in sync when you change the controls?</p>
<div class="solution">
<p><span id="unlabeled-div-38" class="solution"><em>Solution</em>. </span></p>
<div id="solution-37" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-37" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="dynamic-ui.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb51-2"><a href="dynamic-ui.html#cb51-2" aria-hidden="true" tabindex="-1"></a>parameter_tabs <span class="ot">&lt;-</span> <span class="fu">tagList</span>(</span>
<span id="cb51-3"><a href="dynamic-ui.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  tags<span class="sc">$</span><span class="fu">style</span>(<span class="st">&quot;#params { display:none; }&quot;</span>),</span>
<span id="cb51-4"><a href="dynamic-ui.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(<span class="at">id =</span> <span class="st">&quot;params&quot;</span>,</span>
<span id="cb51-5"><a href="dynamic-ui.html#cb51-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tabPanel</span>(<span class="st">&quot;slider&quot;</span>,</span>
<span id="cb51-6"><a href="dynamic-ui.html#cb51-6" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">sliderInput</span>(<span class="st">&quot;my_slider&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="at">value =</span> <span class="dv">0</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>)</span>
<span id="cb51-7"><a href="dynamic-ui.html#cb51-7" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb51-8"><a href="dynamic-ui.html#cb51-8" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tabPanel</span>(<span class="st">&quot;numeric&quot;</span>, </span>
<span id="cb51-9"><a href="dynamic-ui.html#cb51-9" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">numericInput</span>(<span class="st">&quot;my_numeric&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="at">value =</span> <span class="dv">0</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>)  </span>
<span id="cb51-10"><a href="dynamic-ui.html#cb51-10" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb51-11"><a href="dynamic-ui.html#cb51-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-12"><a href="dynamic-ui.html#cb51-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-13"><a href="dynamic-ui.html#cb51-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-14"><a href="dynamic-ui.html#cb51-14" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb51-15"><a href="dynamic-ui.html#cb51-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb51-16"><a href="dynamic-ui.html#cb51-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb51-17"><a href="dynamic-ui.html#cb51-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">&quot;my_selector&quot;</span>, <span class="st">&quot;Input Type&quot;</span>, </span>
<span id="cb51-18"><a href="dynamic-ui.html#cb51-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;slider&quot;</span>, <span class="st">&quot;numeric&quot;</span>)</span>
<span id="cb51-19"><a href="dynamic-ui.html#cb51-19" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb51-20"><a href="dynamic-ui.html#cb51-20" aria-hidden="true" tabindex="-1"></a>      parameter_tabs,</span>
<span id="cb51-21"><a href="dynamic-ui.html#cb51-21" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb51-22"><a href="dynamic-ui.html#cb51-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>()</span>
<span id="cb51-23"><a href="dynamic-ui.html#cb51-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-24"><a href="dynamic-ui.html#cb51-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-25"><a href="dynamic-ui.html#cb51-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-26"><a href="dynamic-ui.html#cb51-26" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb51-27"><a href="dynamic-ui.html#cb51-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-28"><a href="dynamic-ui.html#cb51-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if slider changes, update numeric</span></span>
<span id="cb51-29"><a href="dynamic-ui.html#cb51-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>my_slider, {</span>
<span id="cb51-30"><a href="dynamic-ui.html#cb51-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateNumericInput</span>(session, <span class="st">&quot;my_numeric&quot;</span>, <span class="at">value =</span> <span class="fu">isolate</span>(input<span class="sc">$</span>my_slider))</span>
<span id="cb51-31"><a href="dynamic-ui.html#cb51-31" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb51-32"><a href="dynamic-ui.html#cb51-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-33"><a href="dynamic-ui.html#cb51-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if numeric changes update slider</span></span>
<span id="cb51-34"><a href="dynamic-ui.html#cb51-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>my_numeric, {</span>
<span id="cb51-35"><a href="dynamic-ui.html#cb51-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateSliderInput</span>(session, <span class="st">&quot;my_slider&quot;</span>, <span class="at">value =</span> <span class="fu">isolate</span>(input<span class="sc">$</span>my_numeric))</span>
<span id="cb51-36"><a href="dynamic-ui.html#cb51-36" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb51-37"><a href="dynamic-ui.html#cb51-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-38"><a href="dynamic-ui.html#cb51-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>my_selector, {</span>
<span id="cb51-39"><a href="dynamic-ui.html#cb51-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateTabsetPanel</span>(session, <span class="st">&quot;params&quot;</span>, <span class="at">selected =</span> input<span class="sc">$</span>my_selector)</span>
<span id="cb51-40"><a href="dynamic-ui.html#cb51-40" aria-hidden="true" tabindex="-1"></a>  }) </span>
<span id="cb51-41"><a href="dynamic-ui.html#cb51-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-42"><a href="dynamic-ui.html#cb51-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-43"><a href="dynamic-ui.html#cb51-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-44"><a href="dynamic-ui.html#cb51-44" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.3.4.2" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.3.4.2<a href="dynamic-ui.html#exercise-10.3.4.2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Explain how this app works. Why does the password disappear when you click the enter password button for the second time?</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="dynamic-ui.html#cb52-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb52-2"><a href="dynamic-ui.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionButton</span>(<span class="st">&quot;go&quot;</span>, <span class="st">&quot;Enter password&quot;</span>),</span>
<span id="cb52-3"><a href="dynamic-ui.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">textOutput</span>(<span class="st">&quot;text&quot;</span>)</span>
<span id="cb52-4"><a href="dynamic-ui.html#cb52-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-5"><a href="dynamic-ui.html#cb52-5" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb52-6"><a href="dynamic-ui.html#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>go, {</span>
<span id="cb52-7"><a href="dynamic-ui.html#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">showModal</span>(<span class="fu">modalDialog</span>(</span>
<span id="cb52-8"><a href="dynamic-ui.html#cb52-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">passwordInput</span>(<span class="st">&quot;password&quot;</span>, <span class="cn">NULL</span>),</span>
<span id="cb52-9"><a href="dynamic-ui.html#cb52-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&quot;Please enter your password&quot;</span></span>
<span id="cb52-10"><a href="dynamic-ui.html#cb52-10" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb52-11"><a href="dynamic-ui.html#cb52-11" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb52-12"><a href="dynamic-ui.html#cb52-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-13"><a href="dynamic-ui.html#cb52-13" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb52-14"><a href="dynamic-ui.html#cb52-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">isTruthy</span>(input<span class="sc">$</span>password)) {</span>
<span id="cb52-15"><a href="dynamic-ui.html#cb52-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;No password&quot;</span></span>
<span id="cb52-16"><a href="dynamic-ui.html#cb52-16" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb52-17"><a href="dynamic-ui.html#cb52-17" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Password entered&quot;</span></span>
<span id="cb52-18"><a href="dynamic-ui.html#cb52-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb52-19"><a href="dynamic-ui.html#cb52-19" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb52-20"><a href="dynamic-ui.html#cb52-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.3.4.3" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.3.4.3<a href="dynamic-ui.html#exercise-10.3.4.3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Add support for date and date-time columns <code>make_ui()</code> and <code>filter_var()</code>.</p>
<div class="solution">
<p><span id="unlabeled-div-39" class="solution"><em>Solution</em>. </span></p>
<div id="solution-38" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-38" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In order to complete this, I had to</p>
<ol style="list-style-type: decimal">
<li>make a new dummy dataframe I called <code>x</code> in order to test for dates</li>
<li>include checking for <code>is.Date</code> in the <code>make_ui</code> and <code>filter_var</code> functions</li>
<li>Change <code>tableOutput</code> and <code>renderTable</code> to <code>DT::renderTableOutput</code> and <code>DT::renderTableOutput</code> because <code>renderTable</code> was rendering the dates as numbers and I think this could be because it uses <code>xtable()</code> for HTML table rendering?</li>
</ol>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="dynamic-ui.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 8.4.3.2</span></span>
<span id="cb53-2"><a href="dynamic-ui.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb53-3"><a href="dynamic-ui.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb53-4"><a href="dynamic-ui.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb53-5"><a href="dynamic-ui.html#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="dynamic-ui.html#cb53-6" aria-hidden="true" tabindex="-1"></a>make_ui <span class="ot">&lt;-</span> <span class="cf">function</span>(x, var) {</span>
<span id="cb53-7"><a href="dynamic-ui.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(x)) {</span>
<span id="cb53-8"><a href="dynamic-ui.html#cb53-8" aria-hidden="true" tabindex="-1"></a>    rng <span class="ot">&lt;-</span> <span class="fu">range</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-9"><a href="dynamic-ui.html#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(var, var, <span class="at">min =</span> rng[<span class="dv">1</span>], <span class="at">max =</span> rng[<span class="dv">2</span>], <span class="at">value =</span> rng)</span>
<span id="cb53-10"><a href="dynamic-ui.html#cb53-10" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.factor</span>(x)) {</span>
<span id="cb53-11"><a href="dynamic-ui.html#cb53-11" aria-hidden="true" tabindex="-1"></a>    levs <span class="ot">&lt;-</span> <span class="fu">levels</span>(x)</span>
<span id="cb53-12"><a href="dynamic-ui.html#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">selectInput</span>(var, var, <span class="at">choices =</span> levs, <span class="at">selected =</span> levs, <span class="at">multiple =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-13"><a href="dynamic-ui.html#cb53-13" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (lubridate<span class="sc">::</span><span class="fu">is.Date</span>(x)) {</span>
<span id="cb53-14"><a href="dynamic-ui.html#cb53-14" aria-hidden="true" tabindex="-1"></a>    rng <span class="ot">&lt;-</span> <span class="fu">range</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-15"><a href="dynamic-ui.html#cb53-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dateInput</span>(var, var, <span class="at">min =</span> rng[<span class="dv">1</span>], <span class="at">max =</span> rng[<span class="dv">2</span>], <span class="at">value =</span> rng[<span class="dv">1</span>])</span>
<span id="cb53-16"><a href="dynamic-ui.html#cb53-16" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb53-17"><a href="dynamic-ui.html#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># No control, so don&#39;t filter</span></span>
<span id="cb53-18"><a href="dynamic-ui.html#cb53-18" aria-hidden="true" tabindex="-1"></a>    <span class="cn">NULL</span></span>
<span id="cb53-19"><a href="dynamic-ui.html#cb53-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-20"><a href="dynamic-ui.html#cb53-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-21"><a href="dynamic-ui.html#cb53-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-22"><a href="dynamic-ui.html#cb53-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-23"><a href="dynamic-ui.html#cb53-23" aria-hidden="true" tabindex="-1"></a>filter_var <span class="ot">&lt;-</span> <span class="cf">function</span>(x, val) {</span>
<span id="cb53-24"><a href="dynamic-ui.html#cb53-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(x)) {</span>
<span id="cb53-25"><a href="dynamic-ui.html#cb53-25" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(x) <span class="sc">&amp;</span> x <span class="sc">&gt;=</span> val[<span class="dv">1</span>] <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> val[<span class="dv">2</span>]</span>
<span id="cb53-26"><a href="dynamic-ui.html#cb53-26" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.factor</span>(x)) {</span>
<span id="cb53-27"><a href="dynamic-ui.html#cb53-27" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">%in%</span> val</span>
<span id="cb53-28"><a href="dynamic-ui.html#cb53-28" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (lubridate<span class="sc">::</span><span class="fu">is.Date</span>(x)) {</span>
<span id="cb53-29"><a href="dynamic-ui.html#cb53-29" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">%in%</span> val</span>
<span id="cb53-30"><a href="dynamic-ui.html#cb53-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb53-31"><a href="dynamic-ui.html#cb53-31" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span></span>
<span id="cb53-32"><a href="dynamic-ui.html#cb53-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-33"><a href="dynamic-ui.html#cb53-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-34"><a href="dynamic-ui.html#cb53-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-35"><a href="dynamic-ui.html#cb53-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb53-36"><a href="dynamic-ui.html#cb53-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-37"><a href="dynamic-ui.html#cb53-37" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">keep</span>(<span class="fu">ls</span>(<span class="st">&quot;package:datasets&quot;</span>), <span class="sc">~</span> <span class="fu">is.data.frame</span>(<span class="fu">get</span>(.x, <span class="st">&quot;package:datasets&quot;</span>)))</span>
<span id="cb53-38"><a href="dynamic-ui.html#cb53-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-39"><a href="dynamic-ui.html#cb53-39" aria-hidden="true" tabindex="-1"></a><span class="co"># add a dataframe with dates in it since I cant find one in the datasets above</span></span>
<span id="cb53-40"><a href="dynamic-ui.html#cb53-40" aria-hidden="true" tabindex="-1"></a><span class="co"># rep 5 dates five times, each include 1 factor a-e</span></span>
<span id="cb53-41"><a href="dynamic-ui.html#cb53-41" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">date =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2020/1/1&quot;</span>), <span class="dv">5</span>),</span>
<span id="cb53-42"><a href="dynamic-ui.html#cb53-42" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">rep</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2020/2/2&quot;</span>), <span class="dv">5</span>),</span>
<span id="cb53-43"><a href="dynamic-ui.html#cb53-43" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">rep</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2020/3/3&quot;</span>), <span class="dv">5</span>),</span>
<span id="cb53-44"><a href="dynamic-ui.html#cb53-44" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">rep</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2020/4/4&quot;</span>), <span class="dv">5</span>),</span>
<span id="cb53-45"><a href="dynamic-ui.html#cb53-45" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">rep</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2020/5/5&quot;</span>), <span class="dv">5</span>)),</span>
<span id="cb53-46"><a href="dynamic-ui.html#cb53-46" aria-hidden="true" tabindex="-1"></a>                <span class="at">fac =</span> <span class="fu">as.factor</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>)))</span>
<span id="cb53-47"><a href="dynamic-ui.html#cb53-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-48"><a href="dynamic-ui.html#cb53-48" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb53-49"><a href="dynamic-ui.html#cb53-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb53-50"><a href="dynamic-ui.html#cb53-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb53-51"><a href="dynamic-ui.html#cb53-51" aria-hidden="true" tabindex="-1"></a>      <span class="co">#selectInput(&quot;dataset&quot;, label = &quot;Dataset&quot;, choices = c(dfs, &quot;x&quot;)),</span></span>
<span id="cb53-52"><a href="dynamic-ui.html#cb53-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">uiOutput</span>(<span class="st">&quot;filter&quot;</span>)</span>
<span id="cb53-53"><a href="dynamic-ui.html#cb53-53" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb53-54"><a href="dynamic-ui.html#cb53-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb53-55"><a href="dynamic-ui.html#cb53-55" aria-hidden="true" tabindex="-1"></a>      DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;data&quot;</span>)</span>
<span id="cb53-56"><a href="dynamic-ui.html#cb53-56" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb53-57"><a href="dynamic-ui.html#cb53-57" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-58"><a href="dynamic-ui.html#cb53-58" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-59"><a href="dynamic-ui.html#cb53-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-60"><a href="dynamic-ui.html#cb53-60" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb53-61"><a href="dynamic-ui.html#cb53-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-62"><a href="dynamic-ui.html#cb53-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># data is either my dummy dataset or from datasets</span></span>
<span id="cb53-63"><a href="dynamic-ui.html#cb53-63" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">reactive</span>(x)</span>
<span id="cb53-64"><a href="dynamic-ui.html#cb53-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-65"><a href="dynamic-ui.html#cb53-65" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">&lt;-</span> <span class="fu">reactive</span>(<span class="fu">names</span>(<span class="fu">data</span>()))</span>
<span id="cb53-66"><a href="dynamic-ui.html#cb53-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-67"><a href="dynamic-ui.html#cb53-67" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>filter <span class="ot">&lt;-</span> <span class="fu">renderUI</span>(</span>
<span id="cb53-68"><a href="dynamic-ui.html#cb53-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># take eahc column name and make ui</span></span>
<span id="cb53-69"><a href="dynamic-ui.html#cb53-69" aria-hidden="true" tabindex="-1"></a>    <span class="co"># data()[[.x]] is each column</span></span>
<span id="cb53-70"><a href="dynamic-ui.html#cb53-70" aria-hidden="true" tabindex="-1"></a>    <span class="co"># and .x is each column name (vars())</span></span>
<span id="cb53-71"><a href="dynamic-ui.html#cb53-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(<span class="fu">vars</span>(), <span class="sc">~</span> <span class="fu">make_ui</span>(<span class="fu">data</span>()[[.x]], .x))</span>
<span id="cb53-72"><a href="dynamic-ui.html#cb53-72" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-73"><a href="dynamic-ui.html#cb53-73" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-74"><a href="dynamic-ui.html#cb53-74" aria-hidden="true" tabindex="-1"></a>  selected <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb53-75"><a href="dynamic-ui.html#cb53-75" aria-hidden="true" tabindex="-1"></a>    <span class="co"># take each column name and filer var</span></span>
<span id="cb53-76"><a href="dynamic-ui.html#cb53-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># with the first argument the column in the data</span></span>
<span id="cb53-77"><a href="dynamic-ui.html#cb53-77" aria-hidden="true" tabindex="-1"></a>    <span class="co"># and the second argument the input$vars()</span></span>
<span id="cb53-78"><a href="dynamic-ui.html#cb53-78" aria-hidden="true" tabindex="-1"></a>    <span class="co"># so for date check that input[[date]] in data[[1]]</span></span>
<span id="cb53-79"><a href="dynamic-ui.html#cb53-79" aria-hidden="true" tabindex="-1"></a>    each_var <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="fu">vars</span>(), <span class="sc">~</span> <span class="fu">filter_var</span>(<span class="fu">data</span>()[[.x]], input[[.x]]))</span>
<span id="cb53-80"><a href="dynamic-ui.html#cb53-80" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-81"><a href="dynamic-ui.html#cb53-81" aria-hidden="true" tabindex="-1"></a>    <span class="co"># notes from @mapaulacaldas</span></span>
<span id="cb53-82"><a href="dynamic-ui.html#cb53-82" aria-hidden="true" tabindex="-1"></a>    <span class="co"># collapse list of TRUE and FALSE using `&amp;`</span></span>
<span id="cb53-83"><a href="dynamic-ui.html#cb53-83" aria-hidden="true" tabindex="-1"></a>    <span class="co"># conditions &lt;- list(TRUE, TRUE, TRUE, FALSE)</span></span>
<span id="cb53-84"><a href="dynamic-ui.html#cb53-84" aria-hidden="true" tabindex="-1"></a>    <span class="co"># purrr::reduce(conditions, `&amp;`) ==</span></span>
<span id="cb53-85"><a href="dynamic-ui.html#cb53-85" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ((conditions[[1]] &amp; conditions[[2]]) &amp; conditions[[3]]) &amp; conditions[[4]]</span></span>
<span id="cb53-86"><a href="dynamic-ui.html#cb53-86" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reduce</span>(each_var, <span class="st">`</span><span class="at">&amp;</span><span class="st">`</span>)</span>
<span id="cb53-87"><a href="dynamic-ui.html#cb53-87" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb53-88"><a href="dynamic-ui.html#cb53-88" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-89"><a href="dynamic-ui.html#cb53-89" aria-hidden="true" tabindex="-1"></a>  <span class="co"># subset the data by the vars that are true</span></span>
<span id="cb53-90"><a href="dynamic-ui.html#cb53-90" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>data <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>(<span class="fu">data</span>()[<span class="fu">selected</span>(), ])</span>
<span id="cb53-91"><a href="dynamic-ui.html#cb53-91" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-92"><a href="dynamic-ui.html#cb53-92" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application </span></span>
<span id="cb53-93"><a href="dynamic-ui.html#cb53-93" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.3.4.4" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.3.4.4<a href="dynamic-ui.html#exercise-10.3.4.4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>(Advanced) If you know the S3 OOP system, consider how you could replace the if blocks in <code>make_ui()</code> and <code>filter_var()</code> with generic functions.</p>
<div class="solution">
<p><span id="unlabeled-div-40" class="solution"><em>Solution</em>. </span></p>
<div id="solution-39" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-39" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="dynamic-ui.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb54-2"><a href="dynamic-ui.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb54-3"><a href="dynamic-ui.html#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="dynamic-ui.html#cb54-4" aria-hidden="true" tabindex="-1"></a>make_ui <span class="ot">&lt;-</span> <span class="cf">function</span>(obj, var) { <span class="fu">UseMethod</span>(<span class="st">&quot;make_ui&quot;</span>) }</span>
<span id="cb54-5"><a href="dynamic-ui.html#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="dynamic-ui.html#cb54-6" aria-hidden="true" tabindex="-1"></a>make_ui.numeric <span class="ot">&lt;-</span> <span class="cf">function</span>(x, var) {</span>
<span id="cb54-7"><a href="dynamic-ui.html#cb54-7" aria-hidden="true" tabindex="-1"></a>  rng <span class="ot">&lt;-</span> <span class="fu">range</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb54-8"><a href="dynamic-ui.html#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sliderInput</span>(var, var, <span class="at">min =</span> rng[<span class="dv">1</span>], <span class="at">max =</span> rng[<span class="dv">2</span>], <span class="at">value =</span> rng)</span>
<span id="cb54-9"><a href="dynamic-ui.html#cb54-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb54-10"><a href="dynamic-ui.html#cb54-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-11"><a href="dynamic-ui.html#cb54-11" aria-hidden="true" tabindex="-1"></a>make_ui.factor <span class="ot">&lt;-</span> <span class="cf">function</span>(x, var) { </span>
<span id="cb54-12"><a href="dynamic-ui.html#cb54-12" aria-hidden="true" tabindex="-1"></a>  levs <span class="ot">&lt;-</span> <span class="fu">levels</span>(x) </span>
<span id="cb54-13"><a href="dynamic-ui.html#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(var, var, <span class="at">choices =</span> levs, <span class="at">selected =</span> levs, <span class="at">multiple =</span> <span class="cn">TRUE</span>)</span>
<span id="cb54-14"><a href="dynamic-ui.html#cb54-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb54-15"><a href="dynamic-ui.html#cb54-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-16"><a href="dynamic-ui.html#cb54-16" aria-hidden="true" tabindex="-1"></a>make_ui.default <span class="ot">&lt;-</span> <span class="cf">function</span>(x, var) { <span class="cn">NULL</span> }</span>
<span id="cb54-17"><a href="dynamic-ui.html#cb54-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-18"><a href="dynamic-ui.html#cb54-18" aria-hidden="true" tabindex="-1"></a>filter_var <span class="ot">&lt;-</span> <span class="cf">function</span>(x, val) { <span class="fu">UseMethod</span>(<span class="st">&quot;filter_var&quot;</span>) }</span>
<span id="cb54-19"><a href="dynamic-ui.html#cb54-19" aria-hidden="true" tabindex="-1"></a>filter_var.numeric <span class="ot">&lt;-</span> <span class="cf">function</span>(x, val) { <span class="sc">!</span><span class="fu">is.na</span>(x) <span class="sc">&amp;</span> x <span class="sc">&gt;=</span> val[<span class="dv">1</span>] <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> val[<span class="dv">2</span>] }</span>
<span id="cb54-20"><a href="dynamic-ui.html#cb54-20" aria-hidden="true" tabindex="-1"></a>filter_var.factor <span class="ot">&lt;-</span> <span class="cf">function</span>(x, val) { x <span class="sc">%in%</span> val }</span>
<span id="cb54-21"><a href="dynamic-ui.html#cb54-21" aria-hidden="true" tabindex="-1"></a>filter_var.default <span class="ot">&lt;-</span> <span class="cf">function</span>(x, val) { <span class="cn">TRUE</span> }</span>
<span id="cb54-22"><a href="dynamic-ui.html#cb54-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-23"><a href="dynamic-ui.html#cb54-23" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">keep</span>(<span class="fu">ls</span>(<span class="st">&quot;package:datasets&quot;</span>), <span class="sc">~</span> <span class="fu">is.data.frame</span>(<span class="fu">get</span>(.x, <span class="st">&quot;package:datasets&quot;</span>)))</span>
<span id="cb54-24"><a href="dynamic-ui.html#cb54-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-25"><a href="dynamic-ui.html#cb54-25" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb54-26"><a href="dynamic-ui.html#cb54-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb54-27"><a href="dynamic-ui.html#cb54-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb54-28"><a href="dynamic-ui.html#cb54-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">&quot;dataset&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Dataset&quot;</span>, <span class="at">choices =</span> dfs),</span>
<span id="cb54-29"><a href="dynamic-ui.html#cb54-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">uiOutput</span>(<span class="st">&quot;filter&quot;</span>)</span>
<span id="cb54-30"><a href="dynamic-ui.html#cb54-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-31"><a href="dynamic-ui.html#cb54-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb54-32"><a href="dynamic-ui.html#cb54-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tableOutput</span>(<span class="st">&quot;data&quot;</span>)</span>
<span id="cb54-33"><a href="dynamic-ui.html#cb54-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-34"><a href="dynamic-ui.html#cb54-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-35"><a href="dynamic-ui.html#cb54-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-36"><a href="dynamic-ui.html#cb54-36" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb54-37"><a href="dynamic-ui.html#cb54-37" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb54-38"><a href="dynamic-ui.html#cb54-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get</span>(input<span class="sc">$</span>dataset, <span class="st">&quot;package:datasets&quot;</span>)</span>
<span id="cb54-39"><a href="dynamic-ui.html#cb54-39" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb54-40"><a href="dynamic-ui.html#cb54-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-41"><a href="dynamic-ui.html#cb54-41" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">&lt;-</span> <span class="fu">reactive</span>(<span class="fu">names</span>(<span class="fu">data</span>()))</span>
<span id="cb54-42"><a href="dynamic-ui.html#cb54-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-43"><a href="dynamic-ui.html#cb54-43" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>filter <span class="ot">&lt;-</span> <span class="fu">renderUI</span>(</span>
<span id="cb54-44"><a href="dynamic-ui.html#cb54-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(<span class="fu">vars</span>(), <span class="sc">~</span> <span class="fu">make_ui</span>(<span class="fu">data</span>()[[.x]], .x))</span>
<span id="cb54-45"><a href="dynamic-ui.html#cb54-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-46"><a href="dynamic-ui.html#cb54-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-47"><a href="dynamic-ui.html#cb54-47" aria-hidden="true" tabindex="-1"></a>  selected <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb54-48"><a href="dynamic-ui.html#cb54-48" aria-hidden="true" tabindex="-1"></a>    each_var <span class="ot">&lt;-</span> <span class="fu">map</span>(<span class="fu">vars</span>(), <span class="sc">~</span> <span class="fu">filter_var</span>(<span class="fu">data</span>()[[.x]], input[[.x]]))</span>
<span id="cb54-49"><a href="dynamic-ui.html#cb54-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reduce</span>(each_var, <span class="st">`</span><span class="at">&amp;</span><span class="st">`</span>)</span>
<span id="cb54-50"><a href="dynamic-ui.html#cb54-50" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb54-51"><a href="dynamic-ui.html#cb54-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-52"><a href="dynamic-ui.html#cb54-52" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>data <span class="ot">&lt;-</span> <span class="fu">renderTable</span>(<span class="fu">head</span>(<span class="fu">data</span>()[<span class="fu">selected</span>(), ], <span class="dv">12</span>))</span>
<span id="cb54-53"><a href="dynamic-ui.html#cb54-53" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb54-54"><a href="dynamic-ui.html#cb54-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-55"><a href="dynamic-ui.html#cb54-55" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-10.3.4.5" class="section level3 unnumbered hasAnchor">
<h3>Exercise 10.3.4.5<a href="dynamic-ui.html#exercise-10.3.4.5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>(Hard) Make a wizard that allows the user to upload their own dataset. The first page should handle the upload. The second should handle reading it, providing one drop down for each variable that lets the user select the column type. The third page should provide some way to get a summary of the dataset.</p>
<div class="solution">
<p><span id="unlabeled-div-41" class="solution"><em>Solution</em>. </span></p>
<div id="solution-40" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="dynamic-ui.html#solution-40" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="note">
<p>I wasn’t really sure what was meant by “some way to get a summary of the dataset” So I’m just using the summary function.</p>
</div>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="dynamic-ui.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb55-2"><a href="dynamic-ui.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb55-3"><a href="dynamic-ui.html#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="dynamic-ui.html#cb55-4" aria-hidden="true" tabindex="-1"></a>make_dropdown <span class="ot">&lt;-</span> <span class="cf">function</span>(name_of_vector) {</span>
<span id="cb55-5"><a href="dynamic-ui.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="at">inputId =</span> name_of_vector, <span class="at">label =</span>  name_of_vector, <span class="at">choices =</span> </span>
<span id="cb55-6"><a href="dynamic-ui.html#cb55-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">c</span>(<span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;character&quot;</span>, <span class="st">&quot;logical&quot;</span>))</span>
<span id="cb55-7"><a href="dynamic-ui.html#cb55-7" aria-hidden="true" tabindex="-1"></a>}  </span>
<span id="cb55-8"><a href="dynamic-ui.html#cb55-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-9"><a href="dynamic-ui.html#cb55-9" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb55-10"><a href="dynamic-ui.html#cb55-10" aria-hidden="true" tabindex="-1"></a>  tags<span class="sc">$</span><span class="fu">style</span>(<span class="st">&quot;#wizard { display:none; }&quot;</span>),</span>
<span id="cb55-11"><a href="dynamic-ui.html#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(<span class="at">id =</span> <span class="st">&quot;wizard&quot;</span>,</span>
<span id="cb55-12"><a href="dynamic-ui.html#cb55-12" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tabPanel</span>(<span class="st">&quot;page1&quot;</span>, </span>
<span id="cb55-13"><a href="dynamic-ui.html#cb55-13" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">fileInput</span>(<span class="st">&quot;data_input&quot;</span>, <span class="st">&quot;input&quot;</span>),</span>
<span id="cb55-14"><a href="dynamic-ui.html#cb55-14" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">actionButton</span>(<span class="st">&quot;page12&quot;</span>, <span class="st">&quot;next&quot;</span>)</span>
<span id="cb55-15"><a href="dynamic-ui.html#cb55-15" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb55-16"><a href="dynamic-ui.html#cb55-16" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tabPanel</span>(<span class="st">&quot;page2&quot;</span>,</span>
<span id="cb55-17"><a href="dynamic-ui.html#cb55-17" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">sidebarLayout</span>(</span>
<span id="cb55-18"><a href="dynamic-ui.html#cb55-18" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">sidebarPanel</span>(</span>
<span id="cb55-19"><a href="dynamic-ui.html#cb55-19" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">uiOutput</span>(<span class="st">&quot;type_of&quot;</span>)</span>
<span id="cb55-20"><a href="dynamic-ui.html#cb55-20" aria-hidden="true" tabindex="-1"></a>                           ),</span>
<span id="cb55-21"><a href="dynamic-ui.html#cb55-21" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">mainPanel</span>(</span>
<span id="cb55-22"><a href="dynamic-ui.html#cb55-22" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">tableOutput</span>(<span class="st">&#39;type_table&#39;</span>)</span>
<span id="cb55-23"><a href="dynamic-ui.html#cb55-23" aria-hidden="true" tabindex="-1"></a>                           )),</span>
<span id="cb55-24"><a href="dynamic-ui.html#cb55-24" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">actionButton</span>(<span class="st">&quot;page21&quot;</span>, <span class="st">&quot;prev&quot;</span>),</span>
<span id="cb55-25"><a href="dynamic-ui.html#cb55-25" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">actionButton</span>(<span class="st">&quot;page23&quot;</span>, <span class="st">&quot;next&quot;</span>)</span>
<span id="cb55-26"><a href="dynamic-ui.html#cb55-26" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb55-27"><a href="dynamic-ui.html#cb55-27" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tabPanel</span>(<span class="st">&quot;page3&quot;</span>, </span>
<span id="cb55-28"><a href="dynamic-ui.html#cb55-28" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">tableOutput</span>(<span class="st">&quot;summary_table&quot;</span>),</span>
<span id="cb55-29"><a href="dynamic-ui.html#cb55-29" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">actionButton</span>(<span class="st">&quot;page32&quot;</span>, <span class="st">&quot;prev&quot;</span>)</span>
<span id="cb55-30"><a href="dynamic-ui.html#cb55-30" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb55-31"><a href="dynamic-ui.html#cb55-31" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-32"><a href="dynamic-ui.html#cb55-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-33"><a href="dynamic-ui.html#cb55-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-34"><a href="dynamic-ui.html#cb55-34" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb55-35"><a href="dynamic-ui.html#cb55-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-36"><a href="dynamic-ui.html#cb55-36" aria-hidden="true" tabindex="-1"></a>  <span class="do">################ WIZARD  ###############################</span></span>
<span id="cb55-37"><a href="dynamic-ui.html#cb55-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-38"><a href="dynamic-ui.html#cb55-38" aria-hidden="true" tabindex="-1"></a>  switch_tab <span class="ot">&lt;-</span> <span class="cf">function</span>(page) {</span>
<span id="cb55-39"><a href="dynamic-ui.html#cb55-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateTabsetPanel</span>(session, <span class="st">&quot;wizard&quot;</span>, <span class="at">selected =</span> page)</span>
<span id="cb55-40"><a href="dynamic-ui.html#cb55-40" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-41"><a href="dynamic-ui.html#cb55-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-42"><a href="dynamic-ui.html#cb55-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>page12, <span class="fu">switch_tab</span>(<span class="st">&quot;page2&quot;</span>))</span>
<span id="cb55-43"><a href="dynamic-ui.html#cb55-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>page21, <span class="fu">switch_tab</span>(<span class="st">&quot;page1&quot;</span>))</span>
<span id="cb55-44"><a href="dynamic-ui.html#cb55-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>page23, <span class="fu">switch_tab</span>(<span class="st">&quot;page3&quot;</span>))</span>
<span id="cb55-45"><a href="dynamic-ui.html#cb55-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>page32, <span class="fu">switch_tab</span>(<span class="st">&quot;page2&quot;</span>))</span>
<span id="cb55-46"><a href="dynamic-ui.html#cb55-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-47"><a href="dynamic-ui.html#cb55-47" aria-hidden="true" tabindex="-1"></a>  <span class="do">##################### FILE INPUT #######################</span></span>
<span id="cb55-48"><a href="dynamic-ui.html#cb55-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-49"><a href="dynamic-ui.html#cb55-49" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb55-50"><a href="dynamic-ui.html#cb55-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req</span>(input<span class="sc">$</span>data_input)</span>
<span id="cb55-51"><a href="dynamic-ui.html#cb55-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read.csv</span>(input<span class="sc">$</span>data_input<span class="sc">$</span>datapath)</span>
<span id="cb55-52"><a href="dynamic-ui.html#cb55-52" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb55-53"><a href="dynamic-ui.html#cb55-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-54"><a href="dynamic-ui.html#cb55-54" aria-hidden="true" tabindex="-1"></a>  <span class="do">##################### TABLE TYPE #######################</span></span>
<span id="cb55-55"><a href="dynamic-ui.html#cb55-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-56"><a href="dynamic-ui.html#cb55-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make a dropdown using the names of each column</span></span>
<span id="cb55-57"><a href="dynamic-ui.html#cb55-57" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>type_of <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({ <span class="fu">map</span>(<span class="fu">names</span>(<span class="fu">dat</span>()), <span class="sc">~</span> <span class="fu">make_dropdown</span>(.x)) })</span>
<span id="cb55-58"><a href="dynamic-ui.html#cb55-58" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-59"><a href="dynamic-ui.html#cb55-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-60"><a href="dynamic-ui.html#cb55-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># switch the type of column based on the input</span></span>
<span id="cb55-61"><a href="dynamic-ui.html#cb55-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># name of vector == &quot;Sepal.Length&quot;</span></span>
<span id="cb55-62"><a href="dynamic-ui.html#cb55-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># vector == Sepal.Length</span></span>
<span id="cb55-63"><a href="dynamic-ui.html#cb55-63" aria-hidden="true" tabindex="-1"></a>  change_type <span class="ot">&lt;-</span> <span class="cf">function</span>(vector, name_of_vector) {</span>
<span id="cb55-64"><a href="dynamic-ui.html#cb55-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span>(input[[name_of_vector]],</span>
<span id="cb55-65"><a href="dynamic-ui.html#cb55-65" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;numeric&quot;</span> <span class="ot">=</span> vector <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(vector),</span>
<span id="cb55-66"><a href="dynamic-ui.html#cb55-66" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;character&quot;</span> <span class="ot">=</span> vector <span class="ot">&lt;-</span> <span class="fu">as.character</span>(vector),</span>
<span id="cb55-67"><a href="dynamic-ui.html#cb55-67" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;logical&quot;</span> <span class="ot">=</span> vector <span class="ot">&lt;-</span> <span class="fu">as.complex</span>(vector)</span>
<span id="cb55-68"><a href="dynamic-ui.html#cb55-68" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-69"><a href="dynamic-ui.html#cb55-69" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb55-70"><a href="dynamic-ui.html#cb55-70" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-71"><a href="dynamic-ui.html#cb55-71" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert the supplied data to a list</span></span>
<span id="cb55-72"><a href="dynamic-ui.html#cb55-72" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use imap because it is a condensed version o map</span></span>
<span id="cb55-73"><a href="dynamic-ui.html#cb55-73" aria-hidden="true" tabindex="-1"></a>  <span class="co"># with two arguments == x &amp; name_of_x</span></span>
<span id="cb55-74"><a href="dynamic-ui.html#cb55-74" aria-hidden="true" tabindex="-1"></a>  <span class="co"># so we don&#39;t need to supply it arguments beyond the list!</span></span>
<span id="cb55-75"><a href="dynamic-ui.html#cb55-75" aria-hidden="true" tabindex="-1"></a>  df<span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb55-76"><a href="dynamic-ui.html#cb55-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dat</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb55-77"><a href="dynamic-ui.html#cb55-77" aria-hidden="true" tabindex="-1"></a>      <span class="fu">as.list</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb55-78"><a href="dynamic-ui.html#cb55-78" aria-hidden="true" tabindex="-1"></a>      <span class="fu">imap</span>(change_type) <span class="sc">%&gt;%</span> </span>
<span id="cb55-79"><a href="dynamic-ui.html#cb55-79" aria-hidden="true" tabindex="-1"></a>      <span class="fu">as_tibble</span>()</span>
<span id="cb55-80"><a href="dynamic-ui.html#cb55-80" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb55-81"><a href="dynamic-ui.html#cb55-81" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-82"><a href="dynamic-ui.html#cb55-82" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create an output of the data&#39;s names</span></span>
<span id="cb55-83"><a href="dynamic-ui.html#cb55-83" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and their types</span></span>
<span id="cb55-84"><a href="dynamic-ui.html#cb55-84" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>type_table <span class="ot">&lt;-</span> <span class="fu">renderTable</span>(<span class="fu">data.frame</span>(</span>
<span id="cb55-85"><a href="dynamic-ui.html#cb55-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">names</span>(<span class="fu">df</span>()),</span>
<span id="cb55-86"><a href="dynamic-ui.html#cb55-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="fu">map_chr</span>(<span class="fu">df</span>(), <span class="cf">function</span>(x) <span class="fu">typeof</span>(x)))</span>
<span id="cb55-87"><a href="dynamic-ui.html#cb55-87" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-88"><a href="dynamic-ui.html#cb55-88" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-89"><a href="dynamic-ui.html#cb55-89" aria-hidden="true" tabindex="-1"></a>  <span class="do">##################### TABLE OUTPUT #####################</span></span>
<span id="cb55-90"><a href="dynamic-ui.html#cb55-90" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-91"><a href="dynamic-ui.html#cb55-91" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>summary_table <span class="ot">&lt;-</span> <span class="fu">renderTable</span>( <span class="fu">summary</span>(<span class="fu">df</span>()) )</span>
<span id="cb55-92"><a href="dynamic-ui.html#cb55-92" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-93"><a href="dynamic-ui.html#cb55-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-94"><a href="dynamic-ui.html#cb55-94" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="uploads-and-downloads.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bookmarking.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/r4ds/mastering_shiny_book_solutions/edit/master/action-dynamic.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
