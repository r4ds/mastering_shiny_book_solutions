<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 Functions | Mastering Shiny Solutions</title>
  <meta name="description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 Functions | Mastering Shiny Solutions" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="github-repo" content="r4ds/mastering_shiny_book_solutions" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Functions | Mastering Shiny Solutions" />
  
  <meta name="twitter:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  

<meta name="author" content="The R4DS Online Learning Community" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="general-guidelines.html"/>
<link rel="next" href="modules.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102068953-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-102068953-3');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mastering Shiny Solutions</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#note-boxes"><i class="fa fa-check"></i>Note Boxes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html"><i class="fa fa-check"></i><b>2</b> Your First Shiny App</a>
<ul>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.1"><i class="fa fa-check"></i>Exercise 2.8.1</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.2"><i class="fa fa-check"></i>Exercise 2.8.2</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.3"><i class="fa fa-check"></i>Exercise 2.8.3</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.4"><i class="fa fa-check"></i>Exercise 2.8.4</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.5"><i class="fa fa-check"></i>Exercise 2.8.5</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-ui.html"><a href="basic-ui.html"><i class="fa fa-check"></i><b>3</b> Basic UI</a>
<ul>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.1"><i class="fa fa-check"></i>Exercise 3.2.8.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.2"><i class="fa fa-check"></i>Exercise 3.2.8.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.3"><i class="fa fa-check"></i>Exercise 3.2.8.3</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.4"><i class="fa fa-check"></i>Exercise 3.2.8.4</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.5"><i class="fa fa-check"></i>Exercise 3.2.8.5</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.1"><i class="fa fa-check"></i>Exercise 3.3.5.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.2"><i class="fa fa-check"></i>Exercise 3.3.5.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.1"><i class="fa fa-check"></i>Exercise 3.4.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.2"><i class="fa fa-check"></i>Exercise 3.4.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.3"><i class="fa fa-check"></i>Exercise 3.4.6.3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basic-reactivity.html"><a href="basic-reactivity.html"><i class="fa fa-check"></i><b>4</b> Basic Reactivity</a>
<ul>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.1"><i class="fa fa-check"></i>Exercise 4.3.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.2"><i class="fa fa-check"></i>Exercise 4.3.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.4.6.1"><i class="fa fa-check"></i>Exercise 4.4.6.1</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html"><i class="fa fa-check"></i><b>5</b> Case Study: ER Injuries</a>
<ul>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.1"><i class="fa fa-check"></i>Exercise 5.8.1</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.2"><i class="fa fa-check"></i>Exercise 5.8.2</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.3"><i class="fa fa-check"></i>Exercise 5.8.3</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.4"><i class="fa fa-check"></i>Exercise 5.8.4</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>6</b> Workflow</a></li>
<li class="chapter" data-level="7" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>7</b> Graphics</a>
<ul>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.1"><i class="fa fa-check"></i>Exercise 7.6.1</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.2"><i class="fa fa-check"></i>Exercise 7.6.2</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.3"><i class="fa fa-check"></i>Exercise 7.6.3</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="user-feedback.html"><a href="user-feedback.html"><i class="fa fa-check"></i><b>8</b> User Feedback</a></li>
<li class="chapter" data-level="9" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html"><i class="fa fa-check"></i><b>9</b> Uploads and Downloads</a>
<ul>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.1"><i class="fa fa-check"></i>Exercise 9.4.1</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.2"><i class="fa fa-check"></i>Exercise 9.4.2</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.3"><i class="fa fa-check"></i>Exercise 9.4.3</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.4"><i class="fa fa-check"></i>Exercise 9.4.4</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dynamic-ui.html"><a href="dynamic-ui.html"><i class="fa fa-check"></i><b>10</b> Dynamic UI</a>
<ul>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.1"><i class="fa fa-check"></i>Exercise 10.1.5.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.2"><i class="fa fa-check"></i>Exercise 10.1.5.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.3"><i class="fa fa-check"></i>Exercise 10.1.5.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.4"><i class="fa fa-check"></i>Exercise 10.1.5.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.5"><i class="fa fa-check"></i>Exercise 10.1.5.5</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.1"><i class="fa fa-check"></i>Exercise 10.2.3.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.2"><i class="fa fa-check"></i>Exercise 10.2.3.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.3"><i class="fa fa-check"></i>Exercise 10.2.3.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.1"><i class="fa fa-check"></i>Exercise 10.3.4.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.2"><i class="fa fa-check"></i>Exercise 10.3.4.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.3"><i class="fa fa-check"></i>Exercise 10.3.4.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.4"><i class="fa fa-check"></i>Exercise 10.3.4.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.5"><i class="fa fa-check"></i>Exercise 10.3.4.5</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="bookmarking.html"><a href="bookmarking.html"><i class="fa fa-check"></i><b>11</b> Bookmarking</a>
<ul>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.1"><i class="fa fa-check"></i>Exercise 11.3.1</a></li>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.2"><i class="fa fa-check"></i>Exercise 11.3.2</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidy-evaluation.html"><a href="tidy-evaluation.html"><i class="fa fa-check"></i><b>12</b> Tidy Evaluation</a></li>
<li class="chapter" data-level="13" data-path="general-guidelines.html"><a href="general-guidelines.html"><i class="fa fa-check"></i><b>13</b> General Guidelines</a></li>
<li class="chapter" data-level="14" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>14</b> Functions</a>
<ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.1"><i class="fa fa-check"></i>Exercise 14.4.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.2"><i class="fa fa-check"></i>Exercise 14.4.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.3"><i class="fa fa-check"></i>Exercise 14.4.3</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>15</b> Modules</a>
<ul>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.1"><i class="fa fa-check"></i>Exercise 15.6.1</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.2"><i class="fa fa-check"></i>Exercise 15.6.2</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.3"><i class="fa fa-check"></i>Exercise 15.6.3</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.4"><i class="fa fa-check"></i>Exercise 15.6.4</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.5"><i class="fa fa-check"></i>Exercise 15.6.5</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.6"><i class="fa fa-check"></i>Exercise 15.6.6</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>16</b> Packages</a></li>
<li class="chapter" data-level="17" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>17</b> Testing</a></li>
<li class="chapter" data-level="18" data-path="safety.html"><a href="safety.html"><i class="fa fa-check"></i><b>18</b> Safety</a></li>
<li class="chapter" data-level="19" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>19</b> Performance</a></li>
<li class="chapter" data-level="20" data-path="why-reactivity.html"><a href="why-reactivity.html"><i class="fa fa-check"></i><b>20</b> Why reactivity?</a></li>
<li class="chapter" data-level="21" data-path="dependency-tracking.html"><a href="dependency-tracking.html"><i class="fa fa-check"></i><b>21</b> Dependency Tracking</a></li>
<li class="chapter" data-level="22" data-path="scoping.html"><a href="scoping.html"><i class="fa fa-check"></i><b>22</b> Scoping</a></li>
<li class="chapter" data-level="23" data-path="reactive-components.html"><a href="reactive-components.html"><i class="fa fa-check"></i><b>23</b> Reactive Components</a></li>
<li class="chapter" data-level="24" data-path="advanced-ui.html"><a href="advanced-ui.html"><i class="fa fa-check"></i><b>24</b> Advanced UI</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mastering Shiny Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">Chapter 14</span> Functions<a href="functions.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="TODO">
This chapter is in development...
</div>
<div id="exercise-14.4.1" class="section level3 unnumbered hasAnchor">
<h3>Exercise 14.4.1<a href="functions.html#exercise-14.4.1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following app plots user selected variables from the msleep dataset for three different types of mammals (carnivores, omnivores, and herbivores), with one tab for each type of mammal. Remove the redundancy in the <code>selectInput()</code> definitions with the use of functions.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="functions.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb58-2"><a href="functions.html#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="functions.html#cb58-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb58-4"><a href="functions.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;x&quot;</span>,</span>
<span id="cb58-5"><a href="functions.html#cb58-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">&quot;X-axis:&quot;</span>,</span>
<span id="cb58-6"><a href="functions.html#cb58-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;sleep_total&quot;</span>, <span class="st">&quot;sleep_rem&quot;</span>, <span class="st">&quot;sleep_cycle&quot;</span>, </span>
<span id="cb58-7"><a href="functions.html#cb58-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;awake&quot;</span>, <span class="st">&quot;brainwt&quot;</span>, <span class="st">&quot;bodywt&quot;</span>),</span>
<span id="cb58-8"><a href="functions.html#cb58-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">&quot;sleep_rem&quot;</span>),</span>
<span id="cb58-9"><a href="functions.html#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb58-10"><a href="functions.html#cb58-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">&quot;Y-axis:&quot;</span>,</span>
<span id="cb58-11"><a href="functions.html#cb58-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;sleep_total&quot;</span>, <span class="st">&quot;sleep_rem&quot;</span>, <span class="st">&quot;sleep_cycle&quot;</span>, </span>
<span id="cb58-12"><a href="functions.html#cb58-12" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;awake&quot;</span>, <span class="st">&quot;brainwt&quot;</span>, <span class="st">&quot;bodywt&quot;</span>),</span>
<span id="cb58-13"><a href="functions.html#cb58-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">&quot;sleep_total&quot;</span>),</span>
<span id="cb58-14"><a href="functions.html#cb58-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(<span class="at">id =</span> <span class="st">&quot;vore&quot;</span>,</span>
<span id="cb58-15"><a href="functions.html#cb58-15" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tabPanel</span>(<span class="st">&quot;Carnivore&quot;</span>,</span>
<span id="cb58-16"><a href="functions.html#cb58-16" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">plotOutput</span>(<span class="st">&quot;plot_carni&quot;</span>)),</span>
<span id="cb58-17"><a href="functions.html#cb58-17" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tabPanel</span>(<span class="st">&quot;Omnivore&quot;</span>,</span>
<span id="cb58-18"><a href="functions.html#cb58-18" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">plotOutput</span>(<span class="st">&quot;plot_omni&quot;</span>)),</span>
<span id="cb58-19"><a href="functions.html#cb58-19" aria-hidden="true" tabindex="-1"></a>              <span class="fu">tabPanel</span>(<span class="st">&quot;Herbivore&quot;</span>,</span>
<span id="cb58-20"><a href="functions.html#cb58-20" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">plotOutput</span>(<span class="st">&quot;plot_herbi&quot;</span>)))</span>
<span id="cb58-21"><a href="functions.html#cb58-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb58-22"><a href="functions.html#cb58-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-23"><a href="functions.html#cb58-23" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb58-24"><a href="functions.html#cb58-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-25"><a href="functions.html#cb58-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make subsets</span></span>
<span id="cb58-26"><a href="functions.html#cb58-26" aria-hidden="true" tabindex="-1"></a>  carni <span class="ot">&lt;-</span> <span class="fu">reactive</span>( <span class="fu">filter</span>(msleep, vore <span class="sc">==</span> <span class="st">&quot;carni&quot;</span>) )</span>
<span id="cb58-27"><a href="functions.html#cb58-27" aria-hidden="true" tabindex="-1"></a>  omni  <span class="ot">&lt;-</span> <span class="fu">reactive</span>( <span class="fu">filter</span>(msleep, vore <span class="sc">==</span> <span class="st">&quot;omni&quot;</span>)  )</span>
<span id="cb58-28"><a href="functions.html#cb58-28" aria-hidden="true" tabindex="-1"></a>  herbi <span class="ot">&lt;-</span> <span class="fu">reactive</span>( <span class="fu">filter</span>(msleep, vore <span class="sc">==</span> <span class="st">&quot;herbi&quot;</span>) )</span>
<span id="cb58-29"><a href="functions.html#cb58-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-30"><a href="functions.html#cb58-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make plots</span></span>
<span id="cb58-31"><a href="functions.html#cb58-31" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>plot_carni <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb58-32"><a href="functions.html#cb58-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">carni</span>(), <span class="fu">aes_string</span>(<span class="at">x =</span> input<span class="sc">$</span>x, <span class="at">y =</span> input<span class="sc">$</span>y)) <span class="sc">+</span></span>
<span id="cb58-33"><a href="functions.html#cb58-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>()</span>
<span id="cb58-34"><a href="functions.html#cb58-34" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">res =</span> <span class="dv">96</span>)</span>
<span id="cb58-35"><a href="functions.html#cb58-35" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>plot_omni <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb58-36"><a href="functions.html#cb58-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">omni</span>(), <span class="fu">aes_string</span>(<span class="at">x =</span> input<span class="sc">$</span>x, <span class="at">y =</span> input<span class="sc">$</span>y)) <span class="sc">+</span></span>
<span id="cb58-37"><a href="functions.html#cb58-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>()</span>
<span id="cb58-38"><a href="functions.html#cb58-38" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">res =</span> <span class="dv">96</span>)</span>
<span id="cb58-39"><a href="functions.html#cb58-39" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>plot_herbi <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb58-40"><a href="functions.html#cb58-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">herbi</span>(), <span class="fu">aes_string</span>(<span class="at">x =</span> input<span class="sc">$</span>x, <span class="at">y =</span> input<span class="sc">$</span>y)) <span class="sc">+</span></span>
<span id="cb58-41"><a href="functions.html#cb58-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>()</span>
<span id="cb58-42"><a href="functions.html#cb58-42" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">res =</span> <span class="dv">96</span>)</span>
<span id="cb58-43"><a href="functions.html#cb58-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-44"><a href="functions.html#cb58-44" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb58-45"><a href="functions.html#cb58-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-46"><a href="functions.html#cb58-46" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-44" class="solution"><em>Solution</em>. </span></p>
<div id="solution-43" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="functions.html#solution-43" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can see a pattern here where we are creating the same type of plot for each tabset panel, with the only variable changing being the <code>vore</code> argument. We can reduce everything we see in triplicate to functions! We can use <code>map</code> to create a single <code>create_panels</code> function which will create a tab for each of our <code>species</code>. On the server side, the data is filtered three times, and the plots are created three times. We can create a single rendering function that given the correct string it will filter the data, create the correct plot, and assign it to the correct output.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="functions.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb59-2"><a href="functions.html#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="functions.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co"># use a vector for function inputs</span></span>
<span id="cb59-4"><a href="functions.html#cb59-4" aria-hidden="true" tabindex="-1"></a>species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Carnivore&quot;</span>, <span class="st">&quot;Omnivore&quot;</span>, <span class="st">&quot;Herbivore&quot;</span>)</span>
<span id="cb59-5"><a href="functions.html#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="functions.html#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co"># educe to a single UI function</span></span>
<span id="cb59-7"><a href="functions.html#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Marly: this didn&#39;t work!</span></span>
<span id="cb59-8"><a href="functions.html#cb59-8" aria-hidden="true" tabindex="-1"></a>create_panels <span class="ot">&lt;-</span> <span class="cf">function</span>(id) {</span>
<span id="cb59-9"><a href="functions.html#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(id, <span class="fu">plotOutput</span>(<span class="fu">paste0</span>(<span class="st">&quot;plot_&quot;</span>, id)))</span>
<span id="cb59-10"><a href="functions.html#cb59-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb59-11"><a href="functions.html#cb59-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-12"><a href="functions.html#cb59-12" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb59-13"><a href="functions.html#cb59-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;x&quot;</span>,</span>
<span id="cb59-14"><a href="functions.html#cb59-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;X-axis:&quot;</span>,</span>
<span id="cb59-15"><a href="functions.html#cb59-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;sleep_total&quot;</span>, <span class="st">&quot;sleep_rem&quot;</span>, <span class="st">&quot;sleep_cycle&quot;</span>,</span>
<span id="cb59-16"><a href="functions.html#cb59-16" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;awake&quot;</span>, <span class="st">&quot;brainwt&quot;</span>, <span class="st">&quot;bodywt&quot;</span>),</span>
<span id="cb59-17"><a href="functions.html#cb59-17" aria-hidden="true" tabindex="-1"></a>                <span class="at">selected =</span> <span class="st">&quot;sleep_rem&quot;</span>),</span>
<span id="cb59-18"><a href="functions.html#cb59-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb59-19"><a href="functions.html#cb59-19" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> <span class="st">&quot;Y-axis:&quot;</span>,</span>
<span id="cb59-20"><a href="functions.html#cb59-20" aria-hidden="true" tabindex="-1"></a>                <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;sleep_total&quot;</span>, <span class="st">&quot;sleep_rem&quot;</span>, <span class="st">&quot;sleep_cycle&quot;</span>,</span>
<span id="cb59-21"><a href="functions.html#cb59-21" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;awake&quot;</span>, <span class="st">&quot;brainwt&quot;</span>, <span class="st">&quot;bodywt&quot;</span>),</span>
<span id="cb59-22"><a href="functions.html#cb59-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">selected =</span> <span class="st">&quot;sleep_total&quot;</span>),</span>
<span id="cb59-23"><a href="functions.html#cb59-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabsetPanel</span>(</span>
<span id="cb59-24"><a href="functions.html#cb59-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(<span class="st">&quot;Carnivore&quot;</span>, <span class="fu">plotOutput</span>(<span class="st">&quot;plot_Carnivore&quot;</span>)),</span>
<span id="cb59-25"><a href="functions.html#cb59-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(<span class="st">&quot;Omnivore&quot;</span>, <span class="fu">plotOutput</span>(<span class="st">&quot;plot_Omnivore&quot;</span>)),</span>
<span id="cb59-26"><a href="functions.html#cb59-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(<span class="st">&quot;Herbivore&quot;</span>, <span class="fu">plotOutput</span>(<span class="st">&quot;plot_Herbivore&quot;</span>))</span>
<span id="cb59-27"><a href="functions.html#cb59-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb59-28"><a href="functions.html#cb59-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># this works without the tabsetPanel function - why?!</span></span>
<span id="cb59-29"><a href="functions.html#cb59-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># purrr::map(species, create_panels)</span></span>
<span id="cb59-30"><a href="functions.html#cb59-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb59-31"><a href="functions.html#cb59-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-32"><a href="functions.html#cb59-32" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb59-33"><a href="functions.html#cb59-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-34"><a href="functions.html#cb59-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># rendering plot function for each panel</span></span>
<span id="cb59-35"><a href="functions.html#cb59-35" aria-hidden="true" tabindex="-1"></a>    render_outputs <span class="ot">&lt;-</span> <span class="cf">function</span>(id) {</span>
<span id="cb59-36"><a href="functions.html#cb59-36" aria-hidden="true" tabindex="-1"></a>        output[[<span class="fu">paste0</span>(<span class="st">&quot;plot_&quot;</span>, id)]] <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb59-37"><a href="functions.html#cb59-37" aria-hidden="true" tabindex="-1"></a>            msleep <span class="sc">%&gt;%</span></span>
<span id="cb59-38"><a href="functions.html#cb59-38" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(vore <span class="sc">==</span> <span class="fu">tolower</span>(stringr<span class="sc">::</span><span class="fu">str_remove</span>(id, <span class="st">&quot;vore&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb59-39"><a href="functions.html#cb59-39" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb59-40"><a href="functions.html#cb59-40" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes_string</span>(<span class="at">x =</span> input<span class="sc">$</span>x, <span class="at">y =</span> input<span class="sc">$</span>y) <span class="sc">+</span></span>
<span id="cb59-41"><a href="functions.html#cb59-41" aria-hidden="true" tabindex="-1"></a>                <span class="fu">geom_point</span>()</span>
<span id="cb59-42"><a href="functions.html#cb59-42" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb59-43"><a href="functions.html#cb59-43" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb59-44"><a href="functions.html#cb59-44" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb59-45"><a href="functions.html#cb59-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-46"><a href="functions.html#cb59-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># apply to the species vector using map</span></span>
<span id="cb59-47"><a href="functions.html#cb59-47" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(species, render_outputs)</span>
<span id="cb59-48"><a href="functions.html#cb59-48" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb59-49"><a href="functions.html#cb59-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-50"><a href="functions.html#cb59-50" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-14.4.2" class="section level3 unnumbered hasAnchor">
<h3>Exercise 14.4.2<a href="functions.html#exercise-14.4.2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Continue working with the same app from the previous exercise, and further remove redundancy in the code by modularizing how subsets and plots are created.</p>
<div class="solution">
<p><span id="unlabeled-div-45" class="solution"><em>Solution</em>. </span></p>
<div id="solution-44" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="functions.html#solution-44" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>TODO: I’m unsure what to do with this one since we haven’t yet introduced modules?</p>
</div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-14.4.3" class="section level3 unnumbered hasAnchor">
<h3>Exercise 14.4.3<a href="functions.html#exercise-14.4.3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Suppose you have an app that is slow to launch when a user visits it. Can
modularizing your app code help solve this problem? Explain your reasoning.</p>
<div class="solution">
<p><span id="unlabeled-div-46" class="solution"><em>Solution</em>. </span></p>
<div id="solution-45" class="section level4 unnumbered hasAnchor">
<h4>Solution<a href="functions.html#solution-45" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>No, we’re just packaging our code into neater functions - this doesn’t change or optimize what is loaded when the app is launched. In fact, modularizing might even make your application slower in some cases.</p>
</div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="general-guidelines.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modules.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/r4ds/mastering_shiny_book_solutions/edit/master/scaling-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
